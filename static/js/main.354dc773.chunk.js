(this["webpackJsonpmovie-on-project"]=this["webpackJsonpmovie-on-project"]||[]).push([[0],{399:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(34),i=n.n(r),s=n(17),o=n(8),l=n(9),u=n(29),d=n(13),j=n(2),b=function(){return Object(j.jsxs)("div",{className:"home-banner",children:[Object(j.jsxs)("div",{className:"info",children:[Object(j.jsx)("h3",{children:"\u6c99\u4e18 Dune"}),Object(j.jsx)("p",{children:"\u8b1b\u8ff0\u4e00\u500b\u795e\u7955\u53c8\u6027\u683c\u5f37\u70c8\u7684\u82f1\u96c4\u4e4b\u5fc3\u8def\u6b77\u7a0b\uff0c\u672c\u7247\u8b1b\u8ff0\u4fdd\u7f85\u4e9e\u5d14\u8fea\u7684\u6545\u4e8b\uff0c\u4ed6\u662f\u4e00\u500b\u8070\u660e\u53c8\u5bcc\u6709\u5929\u8ce6\u7684\u5e74\u8f15\u4eba\uff0c\u80a9\u8ca0\u8d85\u8d8a\u81ea\u5df1\u7406\u89e3\u7684\u5049\u5927\u5929\u547d\uff0c\u4e14\u5fc5\u9808\u9060\u884c\u81f3\u5b87\u5b99\u4e2d\u6700\u5371\u96aa\u7684\u884c\u661f\uff0c\u4ee5\u78ba\u4fdd\u4ed6\u5bb6\u4eba\u53ca\u65cf\u4eba\u672a\u4f86\u7684\u5ef6\u7e8c\u3002\u6575\u5c0d\u52e2\u529b\u70ba\u6436\u596a\u552f\u6709\u6b64\u884c\u661f\u624d\u51fa\u7522\u7684\u73cd\u8cb4\u8cc7\u6e90\u5927\u6253\u51fa\u624b\uff0c\u800c\u9019\u4e5f\u662f\u4eba\u985e\u6700\u73cd\u8996\u7684\u8cc7\u6e90\uff0c\u4e00\u7a2e\u80fd\u89e3\u9396\u4eba\u985e\u5049\u5927\u6f5b\u80fd\u7684\u7269\u8cea\uff0c\u552f\u6709\u80fd\u6230\u52dd\u81ea\u5df1\u6050\u61fc\u7684\u4eba\u624d\u80fd\u5b58\u6d3b\u3002"}),Object(j.jsx)("div",{className:"buttons",children:Object(j.jsx)(u.b,{to:"/browse",children:"\u66f4\u591a\u597d\u7247"})})]}),Object(j.jsx)("div",{className:"home-banner-bottom"})]})},m=n(178),O=n.n(m),v=function(e){var t=e.children,n=document.body;return Object(r.createPortal)(t,n)},p=function(e){var t=e.children,n=Object(a.useRef)(null),c={closeModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1?arguments[1]:void 0,a=function(){n.current&&n.current.remove(),Object(l.isFunction)(t)&&t()};setTimeout(a,e)}};return Object(j.jsx)(v,{children:Object(j.jsx)("div",{ref:n,children:Object(a.cloneElement)(t,Object(s.a)(Object(s.a)({},t.props),c))})})},h=function(e){var t=Object(j.jsx)(p,{children:e}),n=document.createElement("div");Object(r.render)(t,n)};function f(e){var t=document.querySelectorAll("".concat(e||".modal"));t&&t.forEach((function(e){e.classList.add("hidden"),setTimeout((function(){return e.remove()}),100)}))}var x=function(e){var t=e.data,n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],i=c[1],s=Object(a.useRef)(null),l=Object(a.useCallback)((function(){f(),i(!0)}),[]);return Object(a.useEffect)((function(){if(r){var e=s.current.getBoundingClientRect();h(Object(j.jsx)(H,{data:t,clintRect:e,setVisible:i}))}}),[r]),Object(j.jsx)("div",{onMouseOut:function(){return i(!1)},onMouseEnter:l,className:"movie-card",ref:s,children:Object(j.jsx)("img",{src:t.img,onMouseEnter:l,alt:""})})},g=c.a.memo(x),w=n(21),y=n.n(w),_=n(35),N=n(179),S=n.n(N).a.create({baseURL:"https://movieon.tw",headers:{"Content-Type":"application/json"},withCredentials:!1,validateStatus:function(e){return e>=200&&e<=500}});S.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),S.interceptors.response.use((function(e){if(200!==e.status){var t=e.data.message||e.data.msg;console.error("url:".concat(e.request.responseURL," error"),"errorMessage:".concat(t),"status code:".concat(e.status))}return e}),(function(e){return console.error(e),e.response&&console.error(e.response.request.responseURL,e),Promise.reject(e)}));var k=function(e){return S.get("/api/movie/",{params:e})},E=function(e){return S.get("api/detail/".concat(e))},C=function(e){return S.get("api/movie/recommend?&id=".concat(e))},T=function(e){return S.get("api/search/?query=".concat(e))},M=function(e){var t=e.data,n=t.date_in_theater,a=t.main_taiwan_name,c=t.internal;return Object(j.jsxs)("div",{className:"recommend-card",onClick:function(){f(),setTimeout((function(){h(Object(j.jsx)(D,{id:c}))}),500)},children:[Object(j.jsx)("div",{className:"recommend-card-img",children:Object(j.jsx)("img",{src:t.img})}),Object(j.jsxs)("div",{className:"recommend-card-content",children:[Object(j.jsx)("h6",{children:n.slice(0,4)}),Object(j.jsx)("p",{children:a})]})]})},R=c.a.memo(M),L={Comedy:{id:1,name:"\u559c\u5287",type:"comedy"},Fantasy:{id:2,name:"\u5947\u5e7b",type:"fantasy"},Romance:{id:3,name:"\u611b\u60c5",type:"romance"},Drama:{id:4,name:"\u5287\u60c5",type:"drama"},Action:{id:5,name:"\u52d5\u4f5c",type:"action"},Suspense:{id:6,name:"\u61f8\u7591",type:"suspense"},War:{id:7,name:"\u6230\u722d",type:"war"},Adventure:{id:8,name:"\u5192\u96aa",type:"adventure"},Mystery:{id:11,name:"\u63a8\u7406",type:"mystery"},Horror:{id:12,name:"\u9a5a\u609a\u6050\u6016",type:"horror"},"Sci-Fi":{id:13,name:"\u79d1\u5e7b",type:"Science fiction"},Crime:{id:13,name:"\u72af\u7f6a",type:"crime"},Historical:{id:16,name:"\u6b77\u53f2",type:"historical"},Musical:{id:17,name:"\u6b4c\u821e",type:"musical"},Sports:{id:18,name:"\u9ad4\u80b2",type:"sports"},Biography:{name:"\u50b3\u8a18",type:"biography"}},B=[{name:"\u71b1\u9580\u53c3\u8003",value:"rating_total_amount"},{name:"IMDB",value:"imdb_rating",color:"#DBA506"},{name:"\u8c46\u74e3",value:"douban_rating",color:"#2e963d"},{name:" \u721b\u756a\u8304",value:"audience_rating",color:"#FA320A"}],I=[{value:"imdb_rating",label:"IMDB",children:[{value:"imdb_rating=9",label:"9 \u5206\u4ee5\u4e0a"},{value:"imdb_rating=8",label:"8 \u5206\u4ee5\u4e0a"},{value:"imdb_rating=7",label:"7 \u5206\u4ee5\u4e0a"},{value:"imdb_rating=6",label:"6 \u5206\u4ee5\u4e0a"},{value:"imdb_rating=5",label:"5 \u5206\u4ee5\u4e0a"},{value:"imdb_rating=4",label:"4 \u5206\u4ee5\u4e0a"},{value:"imdb_rating=3",label:"3 \u5206\u4ee5\u4e0a"}]},{value:"douban_rating",label:"\u8c46\u74e3",children:[{value:"douban_rating=9",label:"9 \u5206\u4ee5\u4e0a"},{value:"douban_rating=8",label:"8 \u5206\u4ee5\u4e0a"},{value:"douban_rating=7",label:"7 \u5206\u4ee5\u4e0a"},{value:"douban_rating=6",label:"6 \u5206\u4ee5\u4e0a"},{value:"douban_rating=5",label:"5 \u5206\u4ee5\u4e0a"},{value:"douban_rating=4",label:"4 \u5206\u4ee5\u4e0a"},{value:"douban_rating=3",label:"3 \u5206\u4ee5\u4e0a"}]},{value:"tomato_rating",label:"\u721b\u756a\u8304",children:[{value:"tomato_rating=9",label:"90 \u5206\u4ee5\u4e0a"},{value:"tomato_rating=8",label:"80 \u5206\u4ee5\u4e0a"},{value:"tomato_rating=7",label:"70 \u5206\u4ee5\u4e0a"},{value:"tomato_rating=6",label:"60 \u5206\u4ee5\u4e0a"},{value:"tomato_rating=5",label:"50 \u5206\u4ee5\u4e0a"},{value:"tomato_rating=4",label:"40 \u5206\u4ee5\u4e0a"},{value:"tomato_rating=3",label:"30 \u5206\u4ee5\u4e0a"}]}],F=function(e){var t=e.split(","),n="";return t.forEach((function(e,t){L[e]&&(n+=(0!==t?"\u3001":"")+L[e].name)})),n},A=function(e){var t=e.id,n=e.closeModal,c=Object(a.useState)({}),r=Object(o.a)(c,2),i=r[0],s=r[1],u=Object(a.useState)([]),d=Object(o.a)(u,2),b=d[0],m=d[1],O=Object(a.useRef)(null),v=Object(a.useCallback)((function(){n()}),[]),p=function(e){var t=i.rotten_tomato_id,n=i.imdb_id,a=i.douban_id;switch(e){case"imdb":return window.open("https://www.imdb.com/title/".concat(n),"_blank");case"douban":return window.open("https://movie.douban.com/subject/".concat(a),"_blank");case"tomatoes":return window.open("https://www.rottentomatoes.com/m/".concat(t),"_blank")}},h=function(){var e=Object(_.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:if(200===(a=e.sent).status){e.next=5;break}return e.abrupt("return",n());case 5:s(a.data[0]),window.scrollTo({top:0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(_.a)(y.a.mark((function e(){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:n=e.sent,a=n.data,m(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h(),f()}),[]),Object(j.jsxs)("div",{className:"modal movie-detail-container",children:[Object(j.jsx)("div",{onClick:function(){return v()},className:"black-background"}),!Object(l.isEmpty)(i)&&Object(j.jsxs)("div",{className:"movie-detail",ref:O,children:[Object(j.jsxs)("div",{className:"movie-detail-top",children:[Object(j.jsx)("button",{className:"btn-close",onClick:v,children:Object(j.jsx)("svg",{viewBox:"0 0 24 24","data-uia":"previewModal-closebtn",role:"button","aria-label":"close",tabIndex:"0",children:Object(j.jsx)("path",{d:"M12 10.586l7.293-7.293 1.414 1.414L13.414 12l7.293 7.293-1.414 1.414L12 13.414l-7.293 7.293-1.414-1.414L10.586 12 3.293 4.707l1.414-1.414L12 10.586z",fill:"currentColor"})})}),Object(l.isEmpty)(i.video_id)?Object(j.jsx)("img",{src:i.img}):Object(j.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(i.video_id,"?rel=0&autoplay=1&mute=1&enablejsapi=1"),title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"}),Object(j.jsx)("div",{className:"background-gradient"}),Object(j.jsxs)("div",{className:"info",children:[Object(j.jsx)("h3",{children:i.main_taiwan_name}),Object(j.jsxs)("div",{className:"buttons",children:[Object(j.jsx)("div",{className:"button plus",children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:Object(j.jsx)("path",{d:"M32 16v32m16-16H16"})})}),Object(j.jsx)("div",{className:"button play",children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:Object(j.jsx)("path",{d:"M54 35h2a4 4 0 1 0 0-8H34a81 81 0 0 0 2-18 4 4 0 0 0-8 0s-4 22-18 22H4v24h10c4 0 12 4 16 4h20a4 4 0 0 0 0-8h2a4 4 0 0 0 0-8h2a4 4 0 0 0 0-8"})})})]})]})]}),Object(j.jsxs)("div",{className:"movie-detail-bottom",children:[Object(j.jsxs)("div",{className:"left-row",children:[Object(j.jsx)("p",{className:"preference",children:"XX% \u9069\u5408\u59b3"}),Object(j.jsx)("p",{className:"year",children:i.date_in_theater?i.date_in_theater.slice(0,4):""}),i.chinese_description?i.chinese_description.trim().split("\u3002").map((function(e,t){return e.length?Object(j.jsx)("article",{children:"".concat(e,"\u3002")},t):null})):Object(j.jsx)("article",{})]}),Object(j.jsxs)("div",{className:"right-row",children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"\u5c0e\u6f14\uff1a"}),i.director_list||""]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"\u6f14\u54e1\uff1a"}),i.actor_list.replaceAll(",","\u3001")]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"\u985e\u578b\uff1a"}),F(i.feature_list)]}),Object(j.jsxs)("div",{className:"buttons",children:[i.rating&&Object(j.jsxs)("div",{className:"icon-button-wrap",onClick:function(){return p("imdb")},children:[Object(j.jsx)("div",{className:"button imdb"}),Object(j.jsx)("p",{className:"score",children:"".concat(i.rating,"\uff08\u5171 ").concat(i.rating_count," \u8a55\u5206\uff09")})]}),i.avg_rating&&Object(j.jsxs)("div",{className:"icon-button-wrap",onClick:function(){return p("douban")},children:[Object(j.jsx)("div",{className:"button douban"}),Object(j.jsx)("p",{className:"score",children:"".concat(i.avg_rating,"\uff08\u5171 ").concat(i.total_rating_amount," \u8a55\u5206\uff09")})]}),!Object(l.isEmpty)(i.audience_rating)&&Object(j.jsxs)("div",{className:"icon-button-wrap",onClick:function(){return p("tomatoes")},children:[Object(j.jsx)("div",{className:"button tomatoes"}),Object(j.jsx)("p",{className:"score",children:"".concat(i.audience_rating," \u89c0\u773e\u8a55\u5206\uff08\u5171 ").concat(i.audience_rating_amount," \u8a55\u5206\uff09")})]}),!Object(l.isEmpty)(i.tomator_rating)&&Object(j.jsxs)("div",{className:"icon-button-wrap",onClick:function(){return p("tomatoes")},children:[Object(j.jsx)("div",{className:"button tomatoes"}),Object(j.jsx)("p",{className:"score",children:"".concat(i.tomator_rating," \u5f71\u8a55\u8a55\u5206\uff08\u5171 ").concat(i.tomator_rating_amount," \u8a55\u5206\uff09")})]})]})]})]}),b&&Object(j.jsxs)("div",{className:"movie-detail-recommend",children:[Object(j.jsx)("h4",{children:"\u985e\u4f3c\u5f71\u7247"}),Object(j.jsx)("div",{className:"list",children:b.map((function(e,t){return t>8?null:Object(j.jsx)(R,{data:e},e.id)}))})]})]})]})},D=c.a.memo(A),H=c.a.memo((function(e){var t=e.data,n=e.clintRect,c=e.closeModal,r=e.setVisible,i=Object(a.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],b=Object(a.useState)(null),m=Object(o.a)(b,2),O=m[0],v=m[1],p=Object(a.useRef)(null),f=function(e){var t=e.width,n=e.height,a=e.top,c=e.left,r=window.screen,i=r.availWidth,s=r.availHeight,o=1.7*t>350?350:1.7*t,l=1.08*o,u=a-(l-n)/2,d=c-(o-t)/2;return a+l>s&&(u=s-l),c+o>i&&(d=.96*i-o),c-10<=.04*i&&(d=.04*i),{position:{top:Math.floor(u),left:Math.floor(d)},size:{width:Math.floor(o),height:"auto"}}}(n),x=f.position,g=f.size;Object(a.useEffect)((function(){var e=setTimeout((function(){p.current.classList.remove("hidden")}),500);return d(e),function(){clearTimeout(u),clearTimeout(O)}}),[]);t.id;var w=t.main_taiwan_name,y=t.main_original_name,_=t.imdb_rating,N=t.douban_rating,S=t.tomator_rating,k=t.img,E=t.video_id;return Object(j.jsx)("div",{className:"modal floating-card-wrapper",style:x,children:Object(j.jsx)("div",{className:"floating-card hidden",style:g,onMouseLeave:function(){if(p){p.current.classList.add("hidden");var e=setTimeout((function(){return c()}),300);v(e)}r(!1)},ref:p,children:Object(j.jsxs)("div",{className:"movie-card-info",children:[Object(l.isEmpty)(E)?Object(j.jsx)("img",{src:k}):Object(j.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(E,"?rel=0&autoplay=1&mute=1&enablejsapi=1"),title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"}),Object(j.jsxs)("div",{className:"info-content",children:[Object(j.jsx)("div",{className:"content-top",children:Object(j.jsxs)("h4",{children:["".concat(w,"  "),Object(j.jsx)("span",{children:y})]})}),Object(j.jsx)("div",{className:"tags"}),Object(j.jsxs)("div",{className:"buttons",children:[!Object(l.isEmpty)(_)&&Object(j.jsxs)("div",{className:"icon-button-wrap",children:[Object(j.jsx)("div",{className:"button imdb"}),Object(j.jsx)("p",{className:"score",children:_})]}),!Object(l.isEmpty)(N)&&Object(j.jsxs)("div",{className:"icon-button-wrap",children:[Object(j.jsx)("div",{className:"button douban"}),Object(j.jsx)("p",{className:"score",children:N})]}),!Object(l.isEmpty)(S)&&Object(j.jsxs)("div",{className:"icon-button-wrap",children:[Object(j.jsx)("div",{className:"button tomatoes"}),Object(j.jsx)("p",{className:"score",children:S})]}),Object(j.jsx)("div",{className:"button play",onClick:function(){h(Object(j.jsx)(D,{id:t.internal}))},children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:Object(j.jsx)("path",{d:"M6 2l52 30L6 62V2z"})})})]})]})]})})})})),Y=function(e){var t=e.title,n=e.movies,c=Object(a.useRef)(null);return Object(j.jsxs)("div",{className:"movie-list-wrapper",children:[Object(j.jsx)(u.b,{className:"movie-list-title",to:"/",children:t}),Object(j.jsx)("div",{className:"movie-list",children:Object(j.jsxs)("div",{className:"slider-container",children:[Object(j.jsx)("button",{className:"btn-previous",onClickCapture:function(){var e;f(),null===(e=c.current)||void 0===e||e.slickPrev()}}),Object(j.jsx)(O.a,Object(s.a)(Object(s.a)({},{dots:!1,infinite:!0,speed:500,slidesToShow:7,slidesToScroll:7,initialSlide:0,responsive:[{breakpoint:1400,settings:{slidesToShow:8,slidesToScroll:8,infinite:!0}},{breakpoint:1200,settings:{slidesToShow:6,slidesToScroll:6,infinite:!0}},{breakpoint:992,settings:{slidesToShow:6,slidesToScroll:6,infinite:!0}},{breakpoint:768,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0}},{breakpoint:576,settings:{slidesToShow:4,slidesToScroll:4}}]}),{},{ref:c,children:n.map((function(e){return Object(j.jsx)(g,{data:e},e.main_taiwan_name)}))})),Object(j.jsx)("button",{className:"btn-next",onClickCapture:function(){var e;f(),null===(e=c.current)||void 0===e||e.slickNext()}})]})})]})};function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)([]),s=Object(o.a)(i,2),l=s[0],u=s[1];e.hasOwnProperty("start")||(e.start=0),e.hasOwnProperty("sort")||(e.sort="rating_total_amount");var d=function(){var t=Object(_.a)(y.a.mark((function t(){var n,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.next=3,k(e);case 3:n=t.sent,a=n.data,u(a),r(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){d()}),[]),[l,c]}var P=function(e){var t=e.children,n=e.style,c=e.className;return Object(a.useEffect)((function(){f(),console.log("removeCards")}),[]),Object(j.jsx)("div",{style:n,className:c,children:t})},W=function(){var e=z(),t=Object(o.a)(e,2),n=t[0],a=t[1],c=z({feature:L.Romance.id}),r=Object(o.a)(c,1)[0],i=z({feature:L.Mystery.id}),s=Object(o.a)(i,1)[0],l=z({feature:L.Horror.id}),u=Object(o.a)(l,1)[0],d=z({feature:L.Comedy.id}),m=Object(o.a)(d,1)[0],O=z({feature:L["Sci-Fi"].id}),v=Object(o.a)(O,1)[0];return Object(j.jsxs)(P,{className:"".concat(a&&"loading"),children:[Object(j.jsx)(b,{}),Object(j.jsxs)("div",{className:"home-content-wrapper",children:[Object(j.jsx)(Y,{movies:n,title:"\u71b1\u9580\u7d93\u5178\u597d\u7247"}),Object(j.jsx)(Y,{movies:r,title:"\u6d6a\u6f2b\u611b\u60c5"}),Object(j.jsx)(Y,{movies:s,title:"\u63a8\u7406\u61f8\u7591"}),Object(j.jsx)(Y,{movies:u,title:"\u9a5a\u609a\u6050\u6016"}),Object(j.jsx)(Y,{movies:m,title:"\u8f15\u9b06\u559c\u5287"}),Object(j.jsx)(Y,{movies:v,title:"\u79d1\u5e7b\u4e16\u754c"})]})]})};function q(){var e=Object(d.f)();return{changeRouter:function(t){t&&(f(),e.push(t))}}}var K=function(e){var t=e.searchWord,n=Object(a.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],s=q();return Object(a.useEffect)((function(){if(Object(l.isEmpty)(t))return s("/");(function(){var e=Object(_.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:n=e.sent,a=n.data,i(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t)}),[t]),Object(j.jsx)(P,{className:"search-wrapper",children:!Object(l.isEmpty)(t)&&Object(j.jsxs)(j.Fragment,{children:[r.length&&Object(j.jsxs)("p",{className:"search-hint",children:["\u627e\u5230\u8207\u300c ",Object(j.jsx)("span",{children:t})," \u300d\u6709\u95dc\u7684\u5f71\u7247"]}),!r.length&&Object(j.jsxs)("p",{className:"search-hint",children:["\u627e\u4e0d\u5230\u8207\u300c ",Object(j.jsx)("span",{children:t})," \u300d\u6709\u95dc\u7684\u5f71\u7247"]}),Object(j.jsx)("div",{className:"movie-gallery",children:r.map((function(e){return Object(j.jsx)(g,{data:e},e.main_taiwan_name)}))})]})})},V=n(76),U=n(180),J=n.n(U),X=n(405),G=n(404),Q=n(403),Z=n(402),$=Number(J()().format("YYYY")),ee=Object.values(L);ee.unshift({id:"",name:"\u5168\u90e8\u985e\u578b",type:"all"});var te=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(o.a)(r,2),u=i[0],d=i[1],b=Object(a.useState)([]),m=Object(o.a)(b,2),O=m[0],v=m[1],p=Object(a.useRef)(null),h=Object(a.useState)({sort:"rating_total_amount",feature:"",start_year:1980,end_year:$}),x=Object(o.a)(h,2),w=x[0],N=x[1],S=function(e,t){N(Object(s.a)(Object(s.a)({},w),{},Object(V.a)({},e,t)))},E=Object(l.debounce)((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];N(Object(s.a)(Object(s.a)({},w),{},{start_year:n,end_year:a}))}),500),C=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),(n=Object(s.a)({},w)).start=t||0,console.log(n),e.next=6,k(n);case 6:a=e.sent,c=a.data,v(t?O.concat(c):c),d(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f(),C()}),[w]),Object(a.useEffect)((function(){n&&O.length&&C(O.length)}),[n]),Object(a.useEffect)((function(){var e=new IntersectionObserver((function(e){var t=e[0];c(t.isIntersecting)}),{threshold:[1]});return p.current&&e.observe(p.current),function(){e.disconnect()}}),[]),Object(j.jsxs)(P,{className:"browse-wrapper ".concat(u&&"loading"),children:[Object(j.jsxs)("div",{className:"conditions-wrapper",children:[Object(j.jsx)(X.a,{md:2,children:Object(j.jsx)("div",{style:{height:400,position:"fixed"},children:Object(j.jsx)(G.a,{defaultValue:[1980,$],min:1980,max:2021,graduated:!0,vertical:!0,renderMark:function(e){if(e%5===0)return Object(j.jsx)("span",{children:e})},onChange:E})})}),Object(j.jsxs)("div",{className:"flex-space-between",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(Q.a,{title:Object(l.find)(ee,{id:w.feature}).name,activeKey:w.feature,onSelect:function(e){return S("feature",Object(l.find)(ee,{type:e}).id)},children:ee.map((function(e,t){var n=e.name,a=e.type;return Object(j.jsx)(Q.a.Item,{eventKey:a,children:n},a)}))}),Object(j.jsx)(Q.a,{style:{backgroundColor:Object(l.find)(B,{value:w.sort}).color},title:Object(l.find)(B,{value:w.sort}).name,activeKey:w.value,onSelect:function(e){return S("sort",e)},children:B.map((function(e){var t=e.name,n=e.value;return Object(j.jsx)(Q.a.Item,{eventKey:n,children:t},n)}))})]}),Object(j.jsx)(Z.a,{data:I,appearance:"default",placeholder:"\u7be9\u9078\u8a55\u5206",style:{width:"min-content",backgroundColor:"#141414"},searchable:!1,onChange:function(e){Object(l.isEmpty)(e)&&(delete w.imdb_rating,delete w.douban_rating,delete w.tomato_rating),C()},onSelect:function(e,t){if(!(t.length<2)){var n=Object(o.a)(t,2),a=n[0],c=n[1];S(a.value,c.value[c.value.length-1])}},renderValue:function(){var e="",t=w.imdb_rating,n=w.douban_rating,a=w.tomato_rating;return t&&(e+="IMDB / ".concat(t," \u5206\u4ee5\u4e0a")),n&&(e+="".concat(Object(l.isEmpty)(e)?"":"\u3001","\u8c46\u74e3 / ").concat(n," \u5206\u4ee5\u4e0a")),a&&(e+="".concat(Object(l.isEmpty)(e)?"":"\u3001","\u721b\u756a\u8304 / ").concat(a,"0 \u5206\u4ee5\u4e0a")),e}})]})]}),Object(j.jsx)("div",{className:"movie-gallery",children:O.map((function(e){return Object(j.jsx)(g,{data:e},e.main_taiwan_name)}))}),Object(j.jsx)("div",{className:"page-bottom",ref:p})]})},ne=n(192),ae=n.n(ne),ce=function(e){var t=e.isTop,n=e.setSearchWord,c=q().changeRouter,r=Object(a.useState)(!1),i=Object(o.a)(r,2),s=i[0],d=i[1];return Object(j.jsxs)("nav",{className:"navbar ".concat(t&&"top"),children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(u.b,{className:"logo",to:"/"}),Object(j.jsxs)("ul",{className:"navbar-list",children:[Object(j.jsx)(u.b,{to:"/",children:"\u9996\u9801"}),Object(j.jsx)(u.b,{to:"/browse",children:"\u96fb\u5f71\u5206\u985e"})]})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"navbar-input-group ".concat(s&&"isFocus"),children:[Object(j.jsx)("button",{children:Object(j.jsx)(ae.a,{size:"3em",style:{color:"white",fontSize:"22px"},onClick:function(){return d(!0)}})}),Object(j.jsx)("input",{type:"text",onKeyDown:function(e){"Enter"===e.key&&(Object(l.isEmpty)(e.target.value)?(d(!1),c("/")):(n(e.target.value),c("/search")))}})]})})]})},re=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("  "),i=Object(o.a)(r,2),b=i[0],m=i[1];return window.addEventListener("scroll",(function(){c(window.scrollY<150),document.documentElement.scrollTop>150&&f(".floating-card-wrapper")})),window.addEventListener("mouseover",(function(e){Object(l.isEmpty)(Object(l.intersection)(e.target.classList,["search-wrapper","home-content-wrapper","movie-list-wrapper","home-banner","movie-gallery","conditions-wrapper"]))||f()})),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(u.a,{children:[Object(j.jsx)(ce,{isTop:n,setSearchWord:m}),Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{exact:!0,path:"/",component:W}),Object(j.jsx)(d.a,{exact:!0,path:"/search",render:function(e){return Object(j.jsx)(K,Object(s.a)(Object(s.a)({},e),{},{searchWord:b}))}}),Object(j.jsx)(d.a,{exact:!0,path:"/browse",component:te})]})]})})};n(398),n(399);i.a.render(Object(j.jsx)(re,{}),document.getElementById("root"))}},[[400,1,2]]]);
//# sourceMappingURL=main.354dc773.chunk.js.map