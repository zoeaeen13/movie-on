{"version":3,"sources":["components/Home/Banner.js","utils/createModel.js","utils/removeCards.js","components/Movie/MovieCard.js","api.js","components/Movie/RecommendCard.js","constants/type.js","components/Movie/MovieDetail.js","components/Movie/FloatingCard.js","components/Home/MovieList.js","hooks/useFetchMovies.js","components/App/Layout.js","pages/Home/index.js","hooks/useRouter.js","pages/Search/index.js","pages/\bBrowse/index.js","components/App/Navbar.js","components/App/index.js","index.js"],"names":["Banner","className","to","Icon","icon","Portal","children","container","document","body","createPortal","Modal","modalRef","useRef","modalProps","closeModal","duration","handler","removeSelf","current","remove","isFunction","setTimeout","ref","cloneElement","props","createModel","element","createElement","render","removeCards","modals","querySelectorAll","forEach","modal","classList","add","MovieCard","data","useState","visible","setVisible","cardRef","onMouseEnter","useCallback","useEffect","clintRect","getBoundingClientRect","onMouseOut","src","img","React","memo","API","axios","create","baseURL","headers","withCredentials","validateStatus","status","interceptors","request","use","config","err","Promise","reject","response","errorMessage","message","msg","console","error","responseURL","getMovies","params","get","getMovieDetail","id","getRecommends","getMoviesByKeyword","keyword","RecommendCard","date_in_theater","main_taiwan_name","internal","onClick","slice","MOVIE_TYPE","Comedy","name","type","Fantasy","Romance","Drama","Action","Suspense","War","Adventure","Mystery","Horror","Crime","Historical","Musical","Sports","Biography","handleType","str","typeArr","split","ans","index","MovieDetail","info","setInfo","recommend","setRecommend","pageRef","handleClose","onButtonClick","rotten_tomato_id","imdb_id","douban_id","window","open","fetchMovieInfo","a","scrollTo","top","fetchRecommended","isEmpty","viewBox","role","tabIndex","d","fill","video_id","title","allow","xmlns","chinese_description","trim","map","desc","length","director_list","actor_list","replaceAll","feature_list","rating","rating_count","avg_rating","total_rating_amount","audience_rating","audience_rating_amount","tomator_rating","tomator_rating_amount","FloatingCard","firstTimeer","setFirstTimer","secondTimer","setSecondTimer","width","height","left","screen","availWidth","availHeight","newWidth","newHeight","newTop","newLeft","position","Math","floor","size","handleStyle","clearTimeout","main_original_name","imdb_rating","douban_rating","style","onMouseLeave","MovieList","movies","sliderRef","onClickCapture","slickPrev","dots","infinite","speed","slidesToShow","slidesToScroll","initialSlide","responsive","breakpoint","settings","slickNext","useFetchMovies","condition","loading","setLoading","setMovies","hasOwnProperty","start","sort","fetchMovies","Layout","log","Home","classicMovies","feature","romance","mystery","triller","useRouter","history","useHistory","changeRouter","path","push","Search","searchWord","movieTypes","Object","values","unshift","rankingType","value","score","label","Browse","isBottom","setBottom","bottomRef","start_year","end_year","conditions","setConditions","handleConditionChange","debouncedChangeHandler","debounce","concat","intersectionObserver","IntersectionObserver","entries","isIntersecting","threshold","observe","disconnect","Col","md","RangeSlider","defaultValue","min","max","graduated","vertical","renderMark","mark","onChange","Dropdown","find","activeKey","onSelect","Item","eventKey","Cascader","appearance","placeholder","backgroundColor","searchable","tomato_rating","item","selectedPaths","parent","child","renderValue","Navbar","isTop","setSearchWord","isFocus","setInputFocus","color","fontSize","onKeyDown","e","key","target","App","setTop","addEventListener","scrollY","documentElement","scrollTop","exact","component","BrowsePage","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.65a7e495.chunk.js","sourcesContent":["import React from 'react'\nimport { Icon } from 'rsuite'\nimport { Link } from 'react-router-dom'\n\nexport const Banner = () => {\n  return (\n    <div className=\"home-banner\">\n      <div className=\"info\">\n        <h3>測試標題</h3>\n        <p>\n          Lorem Ipsum is simply dummy text of the printing and typesetting\n          industry. Lorem Ipsum has been the standard dummy text since the 1500s\n        </p>\n        <div className=\"buttons\">\n          <Link to=\"/\">\n            <Icon icon=\"info\" />\n            查看內容\n          </Link>\n          <Link to=\"/\">\n            <Icon icon=\"arrow-circle-right\" />\n            更多新片\n          </Link>\n        </div>\n      </div>\n      <div className=\"home-banner-bottom\" />\n    </div>\n  );\n};\n","import { isFunction } from 'lodash'\nimport React, { useRef, cloneElement } from 'react'\nimport { render, createPortal } from 'react-dom'\n\nconst Portal = ({ children }) => {\n\tconst container = document.body\n\treturn createPortal(children, container)\n}\n\nconst Modal = ({ children }) => {\n\tconst modalRef = useRef(null)\n\tconst closeModal = (duration = 300, handler) => {\n\t\tconst removeSelf = () => {\n\t\t\tif (modalRef.current) modalRef.current.remove()\n\t\t\tif (isFunction(handler)) handler()\n\t\t}\n\t\tsetTimeout(removeSelf, duration)\n\t}\n\n\tconst modalProps = { closeModal }\n\treturn (\n\t\t<Portal>\n\t\t\t<div ref={modalRef}>{cloneElement(children, { ...children.props, ...modalProps })}</div>\n\t\t</Portal>\n\t)\n}\n\nconst createModel = (children) => {\n\tconst element = <Modal>{children}</Modal>\n\tconst container = document.createElement('div')\n\trender(element, container)\n}\n\nexport default createModel\n","export default function removeCards(className) {\n  const modals = document.querySelectorAll(`${className ? className : '.modal'}`)\n  if (modals) modals.forEach(modal => {\n    modal.classList.add('hidden')\n    setTimeout(() => modal.remove(), 100)\n  })\n}","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { FloatingCard } from '../Movie'\nimport { removeCards, createModel } from '../../utils'\n\nconst  MovieCard = ({ data }) => {\n  const [visible, setVisible] = useState(false)\n  const cardRef = useRef(null)\n\n  const onMouseEnter = useCallback(() => {\n    removeCards()\n    setVisible(true)\n  }, [])\n\n  useEffect(() => {\n    if (visible) {\n      const clintRect = cardRef.current.getBoundingClientRect()\n      createModel(\n        <FloatingCard\n          data={data}\n          clintRect={clintRect}\n          setVisible={setVisible}\n        />\n      )\n    }\n  }, [visible])\n\n  return (\n    <div\n      onMouseOut={() => setVisible(false)}\n      onMouseEnter={onMouseEnter}\n      className=\"movie-card\"\n      ref={cardRef}\n    >\n      <img src={data.img} />\n    </div>\n  )\n}\nexport default React.memo(MovieCard)","import axios from 'axios'\n\nconst API = axios.create({\n    baseURL: 'https://movieon.tw',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n    withCredentials: false,\n    validateStatus: (status) => {\n        return status >= 200 && status <= 500\n    }\n})\n\nAPI.interceptors.request.use((config) => {\n    return config\n}, (err) => {\n    return Promise.reject(err)\n})\n\n// Add a response interceptor\nAPI.interceptors.response.use(function (response) {\n    if (response.status !== 200) {\n        const errorMessage = response.data.message || response.data.msg\n        console.error(`url:${response.request.responseURL} error`, `errorMessage:${errorMessage}`, `status code:${response.status}`)\n    }\n    return response\n}, function (error) {\n    console.error(error)\n    error.response && console.error(error.response.request.responseURL, error)\n    return Promise.reject(error)\n})\n\nexport const getMovies = (params) => API.get('/api/movie/', { params })\nexport const getMovieDetail = (id) => API.get(`api/detail/${id}`)\nexport const getRecommends = (id) => API.get(`api/movie/recommend?&id=${id}`)\nexport const getMoviesByKeyword = (keyword) => API.get(`api/search/?query=${keyword}`)","import React from 'react'\nimport { createModel, removeCards } from '../../utils'\nimport MovieDetail from './MovieDetail'\n\nconst  RecommendCard = ({ data }) => {\n  const { date_in_theater, main_taiwan_name, internal } = data\n\n  const onClickCard = () => {\n    removeCards()\n    setTimeout(() => {\n      createModel(<MovieDetail id={internal} />)\n    }, 500)\n  }\n\n  return (\n    <div className=\"recommend-card\" onClick={onClickCard}>\n      <div className=\"recommend-card-img\">\n        <img src={data.img} />\n      </div>\n      <div className=\"recommend-card-content\">\n        <h6>{date_in_theater.slice(0, 4)}</h6>\n        <p>{main_taiwan_name}</p>\n      </div>\n    </div>\n  )\n}\nexport default React.memo(RecommendCard)","const MOVIE_TYPE = {\n  Comedy: {\n    id: 1,\n    name: '喜劇',\n    type: 'comedy',\n  },\n  Fantasy: {\n    id: 2,\n    name: '奇幻',\n    type: 'fantasy',\n  },\n  Romance: {\n    id: 3,\n    name: '愛情',\n    type: 'romance',\n  },\n  Drama: {\n    id: 4,\n    name: '劇情',\n    type: 'drama',\n  },\n  Action: {\n    id: 5,\n    name: '動作',\n    type: 'action',\n  },\n  Suspense: {\n    id: 6,\n    name: '懸疑',\n    type: 'suspense',\n  },\n  War: {\n    id: 7,\n    name: '戰爭',\n    type: 'war',\n  },\n  Adventure: {\n    id: 8,\n    name: '冒險',\n    type: 'adventure',\n  },\n  Mystery: {\n    id: 11,\n    name: '推理',\n    type: 'mystery',\n  },\n  Horror: {\n    id: 12,\n    name: '驚悚恐怖',\n    type: 'horror',\n  },\n  'Sci-Fi': {\n    id: 13,\n    name: '科幻',\n    type: 'Science fiction',\n  },\n  Crime: {\n    id: 13,\n    name: '犯罪',\n    type: 'crime',\n  },\n  Historical: {\n    id: 16,\n    name: '歷史',\n    type: 'historical',\n  },\n  Musical:  {\n    id: 17,\n    name: '歌舞',\n    type: 'musical',\n  },\n  Sports:  {\n    id: 18,\n    name: '體育',\n    type: 'sports',\n  },\n  Biography: {\n    name: '傳記',\n    type: 'biography',\n  }\n}\n\nexport default MOVIE_TYPE","import { isEmpty } from 'lodash'\nimport React, { useState, useEffect, useCallback, useRef } from 'react'\nimport { getMovieDetail, getRecommends } from '../../api'\nimport RecommendCard from './RecommendCard'\nimport { MOVIE_TYPE } from '../../constants'\n\nconst handleType = (str) => {\n  const typeArr = str.split(',')\n  let ans = ''\n  typeArr.forEach((type, index) => {\n    if (MOVIE_TYPE[type]) {\n      ans += (index !== 0 ? '、' : '') + MOVIE_TYPE[type].name\n    }\n  })\n  return ans\n}\n\nconst  MovieDetail = ({ id, closeModal }) => {\n  // const [firstTimeer, setFirstTimer] = useState(null)\n  // const [secondTimer, setSecondTimer] = useState(null)\n  const [info, setInfo] = useState({})\n  const [recommend, setRecommend] = useState([])\n  const pageRef = useRef(null)\n\n  const handleClose = useCallback(() => {\n    closeModal()\n    // if (pageRef.current) {\n    //   pageRef.current.classList.add('hidden')\n    //   const id = setTimeout(() => closeModal(), 500)\n    //   setSecondTimer(id)\n    // }\n\t}, [])\n\n  const onButtonClick = (type) => {\n    const { rotten_tomato_id, imdb_id, douban_id } = info\n    switch (type) {\n      case 'imdb':\n        return window.open(`https://www.imdb.com/title/${imdb_id}`, \"_blank\")\n      case 'douban':\n        return window.open(`https://movie.douban.com/subject/${douban_id}`, \"_blank\")\n      case 'tomatoes':\n        return window.open(`https://www.rottentomatoes.com/m/${rotten_tomato_id}`, \"_blank\")\n      default:\n        break;\n    }\n  }\n\n  const fetchMovieInfo = async() => {\n    const response = await getMovieDetail(id)\n    if (response.status !== 200) return closeModal()\n    setInfo(response.data[0])\n    window.scrollTo({ top: 0 })\n  }\n\n  const fetchRecommended = async() => {\n    const { data } = await getRecommends(id)\n    setRecommend(data)\n  }\n\n  useEffect(() => {\n    fetchMovieInfo()\n    fetchRecommended()\n  }, [])\n\n  return (\n    <div className=\"modal movie-detail-container\">\n      <div onClick={() => handleClose()} className=\"black-background\" />\n      {/* <div onClick={() => handleClose()} className={`black-background black-background-animation`} /> */}\n      {!isEmpty(info) && <div className=\"movie-detail\" ref={pageRef} >\n        <div className=\"movie-detail-top\">\n          <button className=\"btn-close\" onClick={handleClose}>\n            <svg viewBox=\"0 0 24 24\" data-uia=\"previewModal-closebtn\" role=\"button\" aria-label=\"close\" tabIndex=\"0\"><path d=\"M12 10.586l7.293-7.293 1.414 1.414L13.414 12l7.293 7.293-1.414 1.414L12 13.414l-7.293 7.293-1.414-1.414L10.586 12 3.293 4.707l1.414-1.414L12 10.586z\" fill=\"currentColor\"></path></svg>\n          </button>\n          {!isEmpty(info.video_id) ? <iframe\n            src={`https://www.youtube.com/embed/${info.video_id}?rel=0&autoplay=1&mute=1&enablejsapi=1`}\n            title=\"YouTube video player\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          /> :  <img src={info.img}/>}\n          <div className=\"background-gradient\" />\n          <div className=\"info\">\n            <h3>{info.main_taiwan_name}</h3>\n            <div className=\"buttons\">\n              <div className=\"button plus\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M32 16v32m16-16H16\"></path></svg>\n              </div>\n              <div className=\"button play\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M54 35h2a4 4 0 1 0 0-8H34a81 81 0 0 0 2-18 4 4 0 0 0-8 0s-4 22-18 22H4v24h10c4 0 12 4 16 4h20a4 4 0 0 0 0-8h2a4 4 0 0 0 0-8h2a4 4 0 0 0 0-8\"></path></svg>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"movie-detail-bottom\">\n          <div className=\"left-row\">\n            <p className=\"preference\">XX% 適合妳</p>\n            <p className=\"year\">{info.date_in_theater ? info.date_in_theater.slice(0, 4) : ''}</p>\n            {info.chinese_description ? info.chinese_description.trim().split('。').map((desc, index) => {\n              if (!desc.length) return null\n              return <article key={index}>{`${desc}。`}</article>\n            }) :  <article />}\n          </div>\n          <div className=\"right-row\">\n            <p><span>導演：</span>{info.director_list || ''}</p>\n            <p><span>演員：</span>{info.actor_list.replaceAll(',', '、')}</p>\n            <p><span>類型：</span>{handleType(info.feature_list)}</p>\n            <div className=\"buttons\">\n              {info.rating && <div className=\"icon-button-wrap\" onClick={() => onButtonClick('imdb')}>\n                <div className=\"button imdb\"/>\n                <p className=\"score\">{`${info.rating}（共 ${info.rating_count} 評分）`}</p>\n              </div>}\n              {info.avg_rating && <div className=\"icon-button-wrap\" onClick={() => onButtonClick('douban')}>\n                <div className=\"button douban\"/>\n                <p className=\"score\">{`${info.avg_rating}（共 ${info.total_rating_amount} 評分）`}</p>\n              </div>}\n              {!isEmpty(info.audience_rating) && <div className=\"icon-button-wrap\" onClick={() => onButtonClick('tomatoes')}>\n                <div className=\"button tomatoes\"/>\n                <p className=\"score\">{`${info.audience_rating} 觀眾評分（共 ${info.audience_rating_amount} 評分）`}</p>\n              </div>}\n              {!isEmpty(info.tomator_rating) && <div className=\"icon-button-wrap\" onClick={() => onButtonClick('tomatoes')}>\n                <div className=\"button tomatoes\"/>\n                <p className=\"score\">{`${info.tomator_rating} 影評評分（共 ${info.tomator_rating_amount} 評分）`}</p>\n              </div>}\n            </div>\n          </div>\n        </div>\n        {recommend && <div className=\"movie-detail-recommend\">\n          <h4>類似影片</h4>\n          <div className=\"list\">\n            {recommend.map((data, index) => {\n              if (index > 8) return null\n              return <RecommendCard key={data.id} data={data}/>\n            }, )}\n          </div>\n        </div>}\n      </div>}\n    </div>\n  )\n}\nexport default React.memo(MovieDetail)","import React, { useState, useRef, useEffect } from 'react'\nimport { isEmpty } from 'lodash'\nimport MovieDetail from './MovieDetail'\nimport { createModel } from '../../utils'\n\n\nconst handleStyle = ({ width, height, top, left }) => {\n  const { availWidth, availHeight } = window.screen\n  const newWidth = width*1.7 > 350 ? 350 : width*1.7\n  const newHeight = newWidth*1.08\n  let newTop = top - ((newHeight - height) / 2)\n  let newLeft = left - ((newWidth - width) / 2)\n  if(top + newHeight > availHeight) newTop =  availHeight - newHeight\n  if(left + newWidth > availWidth) newLeft =  availWidth*0.96 - newWidth\n  if (left - 10 <= availWidth*0.04) newLeft = availWidth*0.04\n  return { position: { top: Math.floor(newTop), left: Math.floor(newLeft) }, size: { width: Math.floor(newWidth), height: 'auto' }}\n}\n\nconst FloatingCard = React.memo(({ data, clintRect, closeModal, setVisible }) => {\n  const [firstTimeer, setFirstTimer] = useState(null)\n  const [secondTimer, setSecondTimer] = useState(null)\n  const cardRef = useRef(null)\n  const { position, size } = handleStyle(clintRect)\n\n  const onMouseLeave = () => {\n    if (cardRef) {\n      cardRef.current.classList.add('hidden')\n      const id = setTimeout(() => closeModal(), 300)\n      setSecondTimer(id)\n    }\n    setVisible(false)\n  }\n\n  const onInfoClick = () => {\n    createModel(<MovieDetail id={data.internal} />)\n  }\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      cardRef.current.classList.remove('hidden')\n    }, 500)\n    setFirstTimer(id)\n\n    return () => {\n      clearTimeout(firstTimeer)\n      clearTimeout(secondTimer)\n    }\n  }, [])\n  \n\n  const { id, main_taiwan_name, main_original_name, imdb_rating, douban_rating, tomator_rating, img, video_id } = data\n  return (\n    <div className=\"modal floating-card-wrapper\" style={position}>\n      <div className=\"floating-card hidden\" style={size} onMouseLeave={onMouseLeave} ref={cardRef}>\n        <div className=\"movie-card-info\">\n          {!isEmpty(video_id) ? <iframe\n            src={`https://www.youtube.com/embed/${video_id}?rel=0&autoplay=1&mute=1&enablejsapi=1`}\n            title=\"YouTube video player\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          ></iframe> : <img src={img}/>}\n          <div className=\"info-content\">\n            \n            <div className=\"content-top\">\n              <h4>{`${main_taiwan_name}  `}<span>{main_original_name}</span></h4>\n              <p className=\"preference\">{`XX% 適合您`}</p>\n            </div>\n            <div className=\"tags\">\n              {/* <p>哈哈哈</p>\n              <p>嘻嘻</p>\n              <p>嘎嘎嘎</p> */}\n            </div>\n            <div className=\"buttons\">\n              {!isEmpty(imdb_rating) && <div className=\"icon-button-wrap\">\n                <div className=\"button imdb\"/>\n                <p className=\"score\">{imdb_rating}</p>\n              </div>}\n              {!isEmpty(douban_rating) && <div className=\"icon-button-wrap\">\n                <div className=\"button douban\"/>\n                <p className=\"score\">{douban_rating}</p>\n              </div>}\n              {!isEmpty(tomator_rating) && <div className=\"icon-button-wrap\">\n                <div className=\"button tomatoes\"/>\n                <p className=\"score\">{tomator_rating}</p>\n              </div>}\n              <div className=\"button play\" onClick={() => onInfoClick(id)}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M6 2l52 30L6 62V2z\"></path></svg>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div> \n  )\n})\n\n\nexport default FloatingCard\n","import React, { useRef } from 'react';\nimport Slider from 'react-slick';\nimport { MovieCard } from '../Movie'\nimport { Link } from 'react-router-dom';\nimport { removeCards } from '../../utils'\n\n// eslint-disable-next-line react/prop-types\nexport const MovieList = ({ title, movies }) => {\n  const sliderRef = useRef(null)\n  const settings = {\n    dots: false,\n    infinite: true,\n    speed: 500,\n    slidesToShow: 7,\n    slidesToScroll: 7,\n    initialSlide: 0,\n    responsive: [\n      {\n        breakpoint: 1400,\n        settings: {\n          slidesToShow: 8,\n          slidesToScroll: 8,\n          infinite: true,\n        },\n      },\n      {\n        breakpoint: 1200,\n        settings: {\n          slidesToShow: 6,\n          slidesToScroll: 6,\n          infinite: true,\n        },\n      },\n      {\n        breakpoint: 992,\n        settings: {\n          slidesToShow: 6,\n          slidesToScroll: 6,\n          infinite: true,\n        },\n      },\n      {\n        breakpoint: 768,\n        settings: {\n          slidesToShow: 4,\n          slidesToScroll: 4,\n          infinite: true,\n        },\n      },\n      {\n        breakpoint: 576,\n        settings: {\n          slidesToShow: 4,\n          slidesToScroll: 4,\n        },\n      },\n    ],\n  }  \n\n  return (\n    <div className=\"movie-list-wrapper\">\n      <Link className=\"movie-list-title\" to=\"/\">{title}</Link>\n      <div className=\"movie-list\">\n        <div className=\"slider-container\">\n          <button className=\"btn-previous\" onClickCapture={() => {\n            removeCards()\n            sliderRef.current?.slickPrev()\n          }} />\n          <Slider {...settings} ref={sliderRef}>\n            {movies.map((data) => {\n              return (\n                <MovieCard key={data.id} data={data} />\n            )})}\n          </Slider>\n          <button className=\"btn-next\" onClickCapture={() => {\n            removeCards()\n            sliderRef.current?.slickNext()\n          }} />\n        </div>\n      </div>\n    </div>\n  );\n};","import { useState, useEffect } from 'react'\nimport { getMovies } from '../api'\n\nexport default function useFetchMovies(condition = {}) {\n  const [loading, setLoading] = useState(false)\n  const [movies, setMovies] = useState([])\n  if(!condition.hasOwnProperty('start')) condition.start = 0\n  if(!condition.hasOwnProperty('sort')) condition.sort = 'rating_total_amount'\n\n  const fetchMovies = async () => {\n    setLoading(true)\n    const { data } = await getMovies(condition)\n    setMovies(data)\n    setLoading(false)\n  }\n  useEffect(() => {\n    fetchMovies()\n  }, [])\n\n  return [ movies, loading ]\n}","import React, { useEffect } from 'react'\nimport { removeCards } from '../../utils'\n\nconst Layout = ({ children, style, className }) => {\n  useEffect(() => {\n    removeCards()\n    console.log('removeCards')\n  }, [])\n\n  return (\n    <div style={style} className={className}>{children}</div>\n  )\n}\n\nexport default Layout\n","import React from 'react';\nimport { Banner, MovieList } from '../../components/Home';\nimport useFetchMovies from '../../hooks/useFetchMovies'\nimport { MOVIE_TYPE } from '../../constants'\nimport Layout from '../../components/App/Layout'\n\nconst Home = () => {\n  const [classicMovies, loading] = useFetchMovies()\n  const [romance] = useFetchMovies({ feature: MOVIE_TYPE['Romance'].id })\n  const [mystery] = useFetchMovies({ feature: MOVIE_TYPE['Mystery'].id })\n  const [triller] = useFetchMovies({ feature: MOVIE_TYPE['Horror'].id })\n\n  return (\n    <Layout className={`${loading && 'loading'}`}>\n      <Banner/>\n      <div className=\"home-content-wrapper\">\n        <MovieList movies={classicMovies} title=\"熱門經典\" />\n        <MovieList movies={romance} title=\"浪漫愛情\" />\n        <MovieList movies={mystery} title=\"推理懸疑\" />\n        <MovieList movies={triller} title=\"驚悚恐怖\" />\n      </div>\n    </Layout>\n  );\n};\n\nexport default Home;\n","import { useHistory } from \"react-router-dom\";\nimport { removeCards } from '../utils'\n\nexport default function useRouter() {\n  const history = useHistory()\n\n  const changeRouter = (path) => {\n    if (path) {\n      removeCards() // 換頁時移除卡片\n      history.push(path)\n    }\n  }\n\n  return { changeRouter }\n}","import React, { useState, useEffect } from 'react'\nimport { isEmpty } from 'lodash'\nimport { MovieCard } from '../../components/Movie'\nimport { getMoviesByKeyword } from '../../api'\nimport useRouter from '../../hooks/useRouter'\nimport Layout from '../../components/App/Layout'\n\nconst Search = ({ searchWord }) => {\n  const [movies, setMovies] = useState([])\n  const changeRouter = useRouter()\n\n  useEffect(() => {\n    if (isEmpty(searchWord)) return changeRouter('/')\n\n    // fetch\n    const fetchMovies = async (keyword) => {\n      const { data } = await getMoviesByKeyword(keyword)\n      setMovies(data)\n    }\n    fetchMovies(searchWord)\n\n  }, [searchWord])\n\n  return (\n    <Layout className=\"search-wrapper\">\n      {!isEmpty(searchWord) && (\n        <>\n        {movies.length && <p className=\"search-hint\">找到與「 <span>{searchWord}</span> 」有關的影片</p>}\n        {!movies.length && <p className=\"search-hint\">找不到與「 <span>{searchWord}</span> 」有關的影片</p>}\n        <div className=\"movie-gallery\">\n          {movies.map((data) => {\n            return (\n              <MovieCard key={data.id} data={data} />\n          )})}\n        </div>\n        </>\n      )}\n    </Layout>\n  );\n};\n\nexport default Search;\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { cloneDeep, isEmpty, find, debounce } from 'lodash'\nimport { Dropdown, RangeSlider, Col, Cascader } from 'rsuite'\nimport Layout from '../../components/App/Layout'\nimport { MovieCard } from '../../components/Movie'\nimport { MOVIE_TYPE } from '../../constants'\nimport { getMovies } from '../../api'\nimport { removeCards } from '../../utils'\n\n// 整理電影類型\nconst movieTypes = Object.values(MOVIE_TYPE)\nmovieTypes.unshift({\n  id: '',\n  name: '全部類型',\n  type: 'all',\n},)\n\n// 熱門參考\nconst rankingType = [\n  {\n    name: '熱門參考',\n    value: 'rating_total_amount',\n  },\n  {\n    name: 'IMDB',\n    value: 'imdb_rating',\n  },\n  {\n    name: '豆瓣',\n    value: 'douban_rating',\n  },\n  {\n    name: ' 爛番茄',\n    value: 'audience_rating',\n  },\n]\n\n// 選擇評分\nconst score = [\n  {\n    value: 'imdb_rating',\n    label: 'IMDB',\n    children: [\n      {\n        value: 'imdb_rating=9',\n        label: '9 分以上',\n      },\n      {\n        value: 'imdb_rating=8',\n        label: '8 分以上',\n      },\n      {\n        value: 'imdb_rating=7',\n        label: '7 分以上',\n      },\n      {\n        value: 'imdb_rating=6',\n        label: '6 分以上',\n      },\n      {\n        value: 'imdb_rating=5',\n        label: '5 分以上',\n      },\n      {\n        value: 'imdb_rating=4',\n        label: '4 分以上',\n      },\n      {\n        value: 'imdb_rating=3',\n        label: '3 分以上',\n      },\n    ]\n  },\n  {\n    value: 'douban_rating',\n    label: '豆瓣',\n    children: [\n      {\n        value: 'douban_rating=9',\n        label: '9 分以上',\n      },\n      {\n        value: 'douban_rating=8',\n        label: '8 分以上',\n      },\n      {\n        value: 'douban_rating=7',\n        label: '7 分以上',\n      },\n      {\n        value: 'douban_rating=6',\n        label: '6 分以上',\n      },\n      {\n        value: 'douban_rating=5',\n        label: '5 分以上',\n      },\n      {\n        value: 'douban_rating=4',\n        label: '4 分以上',\n      },\n      {\n        value: 'douban_rating=3',\n        label: '3 分以上',\n      },\n    ]\n  },\n  {\n    value: 'tomato_rating',\n    label: '爛番茄',\n    children: [\n      {\n        value: 'tomato_rating=9',\n        label: '90 分以上',\n      },\n      {\n        value: 'tomato_rating=8',\n        label: '80 分以上',\n      },\n      {\n        value: 'tomato_rating=7',\n        label: '70 分以上',\n      },\n      {\n        value: 'tomato_rating=6',\n        label: '60 分以上',\n      },\n      {\n        value: 'tomato_rating=5',\n        label: '50 分以上',\n      },\n      {\n        value: 'tomato_rating=4',\n        label: '40 分以上',\n      },\n      {\n        value: 'tomato_rating=3',\n        label: '30 分以上',\n      },\n    ]\n  },\n]\n\nconst startYear = 1980\nconst endYear = 2021\n\nconst Browse = () => {\n  const [isBottom, setBottom] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [movies, setMovies] = useState([])\n  const bottomRef = useRef(null)\n  const [conditions, setConditions] = useState({\n    sort: 'rating_total_amount',\n    feature: '',\n    start_year: startYear,\n    end_year: endYear,\n  })\n\n  const handleConditionChange = (type, value) => {\n    setConditions({...conditions, [type]: value})\n  }\n\n  const handleYearChange = ([start_year, end_year]) => {\n    setConditions({...conditions, start_year, end_year })\n  }\n\n  const debouncedChangeHandler = debounce(handleYearChange, 500)\n\n\n\n  const fetchMovies = async (start) => {\n    setLoading(true)\n    const params = {...conditions}\n    params.start = start ? start : 0\n    console.log(params)\n    const { data } = await getMovies(params)\n    setMovies(start ? movies.concat(data) : data)\n    setLoading(false)\n  }\n\n  useEffect(() => {\n    removeCards() // remove floating cards\n    fetchMovies()\n  }, [conditions])\n\n  useEffect(() => {\n    if (isBottom && movies.length) {\n      fetchMovies(movies.length)\n    }\n  }, [isBottom])\n\n  useEffect(() => {\n    const options = { threshold: [1] }\n    const intersectionObserver = new IntersectionObserver((entries) => {\n      const element = entries[0]\n      setBottom(element.isIntersecting)\n    }, options)\n    if (bottomRef.current) intersectionObserver.observe(bottomRef.current)\n\n    return () => {\n      intersectionObserver.disconnect()\n    }\n  }, [])\n\n  return (\n    <Layout className={`browse-wrapper ${loading && 'loading'}`}>\n      <div className=\"conditions-wrapper\">\n        <Col md={2}>\n          <div style={{ height: 400, position: 'fixed' }}>\n            <RangeSlider\n              defaultValue={[1980, 2021]}\n              min={1980}\n              max={2021}\n              graduated\n              vertical\n              renderMark={mark => {\n                if (mark % 5 === 0) return <span>{mark}</span>\n              }}\n              onChange={debouncedChangeHandler}\n            />\n          </div>\n        </Col>\n        <div className=\"flex-space-between\">\n          <div>\n            <Dropdown\n              title={find(movieTypes, {id: conditions.feature}).name}\n              activeKey={conditions.feature}\n              onSelect={(value) => handleConditionChange('feature', find(movieTypes, {type: value}).id)}>\n              {movieTypes.map(({ id, name, type }, index) => {\n                return (<Dropdown.Item key={id+index} eventKey={type} children={name} />)\n              })}\n            </Dropdown>\n            <Dropdown\n              title={find(rankingType, {value: conditions.sort}).name}\n              activeKey={conditions.value}\n              onSelect={(value) => handleConditionChange('sort', value)}>\n              {rankingType.map(({ name, value }) => {\n                return (<Dropdown.Item key={value} eventKey={value} children={name} />)\n              })}\n            </Dropdown>\n          </div>\n          <Cascader\n            data={score}\n            appearance=\"default\"\n            placeholder=\"篩選評分\"\n            style={{ width: 'min-content', backgroundColor: '#141414'}}\n            searchable={false}\n            onChange={(value) => {\n              if (isEmpty(value)) {\n                delete conditions.imdb_rating\n                delete conditions.douban_rating\n                delete conditions.tomato_rating\n                fetchMovies()\n              }\n            }}\n            onSelect={(item, selectedPaths) => {\n              if (selectedPaths.length < 2) return\n              const [parent, child] = selectedPaths\n              handleConditionChange(parent.value , child.value[child.value.length -1])  \n            }}\n            renderValue={() => {\n              let value = ''\n              const { imdb_rating, douban_rating, tomato_rating } = conditions\n              if (imdb_rating) value += `IMDB / ${imdb_rating} 分以上`\n              if (douban_rating) value += `${isEmpty(value) ? '' : '、'}豆瓣 / ${douban_rating} 分以上`\n              if (tomato_rating) value += `${isEmpty(value) ? '' : '、'}爛番茄 / ${tomato_rating} 分以上`\n              return value\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"movie-gallery\">\n        {movies.map((data, index) => {\n          return (\n            <MovieCard key={data.id+index} data={data} />\n        )})}\n      </div>\n      <div className=\"page-bottom\" ref={bottomRef} />\n    </Layout>\n  );\n};\n\nexport default Browse;\n","import React, { useState } from 'react'\nimport { isEmpty } from 'lodash'\nimport Search from '@rsuite/icons/Search'\nimport { Link } from 'react-router-dom'\nimport useRouter from '../../hooks/useRouter'\n\nconst Navbar = ({ isTop, setSearchWord }) => {\n  const { changeRouter } = useRouter()\n  const [isFocus, setInputFocus] = useState(false)\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      if (isEmpty(e.target.value)) {\n        setInputFocus(false)\n        changeRouter('/')\n      } else {\n        setSearchWord(e.target.value)\n        changeRouter('/search')\n      }\n    }\n  }\n\n  return (\n    <nav className={`navbar ${isTop && 'top'}`}>\n      <div>\n        <Link className=\"logo\" to=\"/\" />\n        <ul className=\"navbar-list\" >\n          <Link to=\"/\">\n            首頁\n          </Link>\n          <Link to=\"/browse\">電影分類</Link>\n          {/* <Link to=\"/myWatchlist\">我的片單</Link> */}\n        </ul>\n      </div>\n      <div>\n        <div className={`navbar-input-group ${isFocus && 'isFocus'}`}>\n          <button>\n            <Search size=\"3em\" style={{ color: 'white', fontSize: '22px' }} onClick={() => setInputFocus(true)} />\n          </button>\n          <input type=\"text\" onKeyDown={handleKeyDown} />\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;","import React, { useState } from 'react'\nimport { Route, Switch } from 'react-router'\nimport { BrowserRouter } from 'react-router-dom'\nimport Home from '../../pages/Home'\nimport SearchPage from '../../pages/Search'\nimport BrowsePage from '../../pages/\bBrowse'\nimport Navbar from './Navbar'\nimport { removeCards } from '../../utils'\n\nconst App = () => {\n  const [isTop, setTop] = useState(true)\n  const [searchWord, setSearchWord] = useState('  ')\n\n  // 滑動時移除卡片\n  window.addEventListener('scroll', () => {\n    setTop(window.scrollY < 150)\n    if (document.documentElement.scrollTop > 150) removeCards('.floating-card-wrapper')\n  })\n\n  return (\n    <>\n      <BrowserRouter>\n        <Navbar isTop={isTop} setSearchWord={setSearchWord}/>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/search\" render={props => <SearchPage {...props} searchWord={searchWord} />} />\n          <Route exact path=\"/browse\" component={BrowsePage} />\n        </Switch>\n      </BrowserRouter>\n    </>\n  );\n};\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport 'rsuite/dist/styles/rsuite-default.css';\nimport './style/scss/main.scss';\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n"],"sourceRoot":""}