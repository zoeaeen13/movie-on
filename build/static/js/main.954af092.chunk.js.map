{"version":3,"sources":["services/GA.js","components/Home/Banner.js","utils/createModel.js","utils/removeCards.js","components/Movie/MovieCard.js","api.js","components/Movie/RecommendCard.js","constants/movieType.js","constants/rankingType.js","constants/scoreOptions.js","components/Movie/MovieDetail.js","components/Movie/FloatingCard.js","components/Home/MovieList.js","hooks/useFetchMovies.js","components/App/Layout.js","pages/Home/index.js","services/firebase.js","providers/UserProvider.js","pages/Login/index.js","pages/Profile/index.js","hooks/useRouter.js","pages/Search/index.js","pages/\bBrowse/index.js","components/App/Navbar.js","components/App/index.js","index.js"],"names":["initGA","ReactGA","initialize","trackingId","process","gaOptions","name","debug","alwaysSendToDefaultTracker","console","log","gaEvent","category","action","param","warn","value","label","event","Banner","className","onClick","to","React","memo","Portal","children","container","document","body","createPortal","Modal","modalRef","useRef","modalProps","closeModal","duration","handler","removeSelf","current","remove","isFunction","setTimeout","ref","cloneElement","props","createModel","element","createElement","render","removeCards","modals","querySelectorAll","forEach","modal","classList","add","MovieCard","data","useState","visible","setVisible","cardRef","showFloatingCard","useCallback","pathname","window","location","replace","isEmpty","internal","useEffect","clintRect","getBoundingClientRect","onMouseOut","onMouseEnter","src","img","alt","API","axios","create","baseURL","headers","withCredentials","validateStatus","status","interceptors","request","use","config","err","Promise","reject","response","errorMessage","message","msg","error","responseURL","getMovies","params","get","getMovieDetail","id","getRecommends","getMoviesByKeyword","keyword","RecommendCard","date_in_theater","main_taiwan_name","slice","MOVIE_TYPE","Comedy","type","Fantasy","Romance","Drama","Action","Suspense","War","Adventure","Mystery","Horror","Crime","Historical","Musical","Sports","Biography","RANKING_TYPE","color","SCORE_OPTIONS","handleType","str","typeArr","split","ans","index","MovieDetail","firstTimeer","setFirstTimer","secondTimer","setSecondTimer","info","setInfo","recommend","setRecommend","pageRef","handleClose","onRankingClick","rotten_tomato_id","imdb_id","douban_id","open","fetchMovieInfo","a","timerId","scrollTo","top","behavior","fetchRecommended","clearTimeout","viewBox","role","tabIndex","d","fill","video_id","title","allow","xmlns","chinese_description","trim","map","desc","length","director_list","actor_list","replaceAll","feature_list","rating","rating_count","avg_rating","total_rating_amount","audience_rating","audience_rating_amount","tomator_rating","tomator_rating_amount","RankingIcon","onRatingClick","FloatingCard","width","height","left","screen","availWidth","availHeight","newWidth","newHeight","newTop","newLeft","position","size","handleStyle","main_original_name","imdb_rating","douban_rating","style","onMouseLeave","onInfoClick","responsive","breakpoint","settings","slidesToShow","slidesToScroll","infinite","MovieList","movies","sliderRef","dots","speed","initialSlide","onSwipe","onSliderClick","slickPrev","slickNext","useFetchMovies","condition","loading","setLoading","setMovies","hasOwnProperty","start","sort","fetchMovies","isArray","Layout","GA_INITIALIZED","set","page","pageview","logPageView","Home","classicMovies","feature","romance","mystery","triller","comedy","ScienceFiction","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAuth","provider","GoogleAuthProvider","setCustomParameters","prompt","UserContext","createContext","user","UserProvider","setUser","onAuthStateChanged","result","displayName","email","accessToken","photoURL","picture","isLogin","Provider","LoginPage","useContext","isRegister","setRegister","onToggleChange","autoComplete","visibility","signInWithPopup","Toggle","checkedChildren","unCheckedChildren","checked","onChange","ProfilePage","useRouter","history","useHistory","changeRouter","path","push","Search","searchWord","endYear","Number","dayjs","format","movieTypes","Object","values","unshift","Browse","isBottom","setBottom","bottomRef","start_year","end_year","conditions","setConditions","handleConditionChange","debouncedOnYearChange","debounce","concat","intersectionObserver","IntersectionObserver","entries","isIntersecting","threshold","observe","disconnect","Col","md","RangeSlider","defaultValue","min","max","graduated","vertical","renderMark","mark","Dropdown","find","activeKey","onSelect","featureId","Item","eventKey","RadioGroup","inline","appearance","Radio","backgroundColor","Cascader","placeholder","searchable","tomato_rating","item","selectedPaths","parent","child","renderValue","Navbar","isTop","setSearchWord","useLocation","isFocus","setInputFocus","fontSize","onKeyDown","e","key","target","App","setTop","addEventListener","scrollY","documentElement","scrollTop","intersection","exact","component","BrowsePage","ReactDOM","getElementById"],"mappings":"8OAEaA,EAAS,WACpBC,IAAQC,WACN,CACE,CACEC,WAAYC,iBACZC,UAAW,CACTC,KAAM,QAGV,CACEH,WAAYC,eACZC,UAAW,CACTC,KAAM,SAIZ,CAAEC,OAAO,EAAOC,4BAA4B,IAE/CC,QAAQC,IAAI,YAaAC,EAAU,SAACC,EAAUC,EAAQC,GAEzC,GADAL,QAAQC,IAAI,WAAYE,EAAUC,IAC7BD,IAAaC,EACjB,OAAOJ,QAAQM,KAAK,mCAErB,GAAID,EAAO,CACR,IAAQE,EAAiBF,EAAjBE,MAAOC,EAAUH,EAAVG,MACjBhB,IAAQiB,MAAM,CAAEN,WAAUC,SAAQG,QAAOC,eAEzChB,IAAQiB,MAAM,CAAEN,WAAUC,Y,OCtCtBM,EAAS,WACb,OACE,sBAAKC,UAAU,cAAcC,QAAS,kBAAMV,EAAQ,OAAQ,uBAA5D,UACE,sBAAKS,UAAU,OAAf,UACE,mDACA,m/BACA,qBAAKA,UAAU,UAAf,SAKE,cAAC,IAAD,CAAME,GAAG,UAAUD,QAAS,kBAAMV,EAAQ,OAAQ,yBAA0B,CAAEM,MAAO,iBAArF,2CAKJ,qBAAKG,UAAU,2BAKNG,MAAMC,KAAKL,G,kBCrBpBM,EAAS,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACXC,EAAYC,SAASC,KAC3B,OAAOC,uBAAaJ,EAAUC,IAGzBI,EAAQ,SAAC,GAAkB,IAAhBL,EAAe,EAAfA,SACVM,EAAWC,iBAAO,MASlBC,EAAa,CAAEC,WARF,WAA8B,IAA7BC,EAA4B,uDAAjB,IAAKC,EAAY,uCACzCC,EAAa,WACdN,EAASO,SAASP,EAASO,QAAQC,SACnCC,qBAAWJ,IAAUA,KAE1BK,WAAWJ,EAAYF,KAIxB,OACC,cAAC,EAAD,UACC,qBAAKO,IAAKX,EAAV,SAAqBY,uBAAalB,EAAD,YAAC,eAAeA,EAASmB,OAAUX,SAWxDY,EANK,SAACpB,GACpB,IAAMqB,EAAU,cAAC,EAAD,UAAQrB,IAClBC,EAAYC,SAASoB,cAAc,OACzCC,iBAAOF,EAASpB,IC9BF,SAASuB,EAAY9B,GAClC,IAAM+B,EAASvB,SAASwB,iBAAT,UAA6BhC,GAAwB,WAChE+B,GAAQA,EAAOE,SAAQ,SAAAC,GACzBA,EAAMC,UAAUC,IAAI,UACpBd,YAAW,kBAAMY,EAAMd,WAAU,QCErC,IAAOiB,EAAY,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACpB,EAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACMC,EAAU7B,iBAAO,MAEjB8B,EAAmBC,uBAAY,WACnCd,IACAW,GAAW,GACX,IAAMI,EAAWC,OAAOC,SAASF,SAASG,QAAQ,IAAK,IACvDzD,EAAQ0D,kBAAQJ,GAAY,OAASA,EAAU,qBAAsB,CAAEjD,MAAO0C,EAAKY,aAClF,IAeH,OAbAC,qBAAU,WACR,GAAIX,EAAS,CACX,IAAMY,EAAYV,EAAQvB,QAAQkC,wBAClC3B,EACE,cAAC,EAAD,CACEY,KAAMA,EACNc,UAAWA,EACXX,WAAYA,QAIjB,CAACD,IAGF,qBACEc,WAAY,kBAAMb,GAAW,IAC7Bc,aAAcZ,EACd3C,UAAU,aACVuB,IAAKmB,EAJP,SAME,qBAAKc,IAAKlB,EAAKmB,IAAKF,aAAcZ,EAAkBe,IAAI,QAI/CvD,MAAMC,KAAKiC,G,gCCvCpBsB,E,OAAMC,EAAMC,OAAO,CACrBC,QAAS9E,6BACT+E,QAAS,CACL,eAAgB,oBAEpBC,iBAAiB,EACjBC,eAAgB,SAACC,GACb,OAAOA,GAAU,KAAOA,GAAU,OAI1CP,EAAIQ,aAAaC,QAAQC,KAAI,SAACC,GAC1B,OAAOA,KACR,SAACC,GACA,OAAOC,QAAQC,OAAOF,MAI1BZ,EAAIQ,aAAaO,SAASL,KAAI,SAAUK,GACpC,GAAwB,MAApBA,EAASR,OAAgB,CACzB,IAAMS,EAAeD,EAASpC,KAAKsC,SAAWF,EAASpC,KAAKuC,IAC5DxF,QAAQyF,MAAR,cAAqBJ,EAASN,QAAQW,YAAtC,iCAA2EJ,GAA3E,sBAA0GD,EAASR,SAEvH,OAAOQ,KACR,SAAUI,GAGT,OAFAzF,QAAQyF,MAAMA,GACdA,EAAMJ,UAAYrF,QAAQyF,MAAMA,EAAMJ,SAASN,QAAQW,YAAaD,GAC7DN,QAAQC,OAAOK,MAGnB,IAAME,EAAY,SAACC,GAAD,OAAYtB,EAAIuB,IAAI,cAAe,CAAED,YACjDE,EAAiB,SAACC,GAAD,OAAQzB,EAAIuB,IAAJ,qBAAsBE,KAC/CC,EAAgB,SAACD,GAAD,OAAQzB,EAAIuB,IAAJ,kCAAmCE,KAC3DE,EAAqB,SAACC,GAAD,OAAa5B,EAAIuB,IAAJ,4BAA6BK,KC9BrEC,EAAgB,SAAC,GAAc,IAAZlD,EAAW,EAAXA,KAChBmD,EAAgDnD,EAAhDmD,gBAAiBC,EAA+BpD,EAA/BoD,iBAAkBxC,EAAaZ,EAAbY,SAU3C,OACE,sBAAKlD,UAAU,yBAAyBC,QATtB,WAClB6B,IACAR,YAAW,WACTI,EAAY,cAAC,EAAD,CAAa0D,GAAIlC,OAC5B,KACH3D,EAAQ,YAAa,4BAA6B,CAAEK,MAAOsD,KAI3D,UACE,qBAAKlD,UAAU,qBAAf,SACE,qBAAKwD,IAAKlB,EAAKmB,QAEjB,sBAAKzD,UAAU,yBAAf,UACE,6BAAKyF,EAAgBE,MAAM,EAAG,KAC9B,4BAAID,WAKGvF,MAAMC,KAAKoF,GCsDXI,EAlFI,CACjBC,OAAQ,CACNT,GAAI,EACJlG,KAAM,eACN4G,KAAM,UAERC,QAAS,CACPX,GAAI,EACJlG,KAAM,eACN4G,KAAM,WAERE,QAAS,CACPZ,GAAI,EACJlG,KAAM,eACN4G,KAAM,WAERG,MAAO,CACLb,GAAI,EACJlG,KAAM,eACN4G,KAAM,SAERI,OAAQ,CACNd,GAAI,EACJlG,KAAM,eACN4G,KAAM,UAERK,SAAU,CACRf,GAAI,EACJlG,KAAM,eACN4G,KAAM,YAERM,IAAK,CACHhB,GAAI,EACJlG,KAAM,eACN4G,KAAM,OAERO,UAAW,CACTjB,GAAI,EACJlG,KAAM,eACN4G,KAAM,aAERQ,QAAS,CACPlB,GAAI,GACJlG,KAAM,eACN4G,KAAM,WAERS,OAAQ,CACNnB,GAAI,GACJlG,KAAM,2BACN4G,KAAM,UAER,SAAU,CACRV,GAAI,GACJlG,KAAM,eACN4G,KAAM,mBAERU,MAAO,CACLpB,GAAI,GACJlG,KAAM,eACN4G,KAAM,SAERW,WAAY,CACVrB,GAAI,GACJlG,KAAM,eACN4G,KAAM,cAERY,QAAU,CACRtB,GAAI,GACJlG,KAAM,eACN4G,KAAM,WAERa,OAAS,CACPvB,GAAI,GACJlG,KAAM,eACN4G,KAAM,UAERc,UAAW,CACT1H,KAAM,eACN4G,KAAM,cCxDKe,EAtBM,CACnB,CACE3H,KAAM,2BACNU,MAAO,uBAET,CACEV,KAAM,OACNU,MAAO,cACPkH,MAAO,WAET,CACE5H,KAAM,eACNU,MAAO,gBACPkH,MAAO,WAET,CACE5H,KAAM,sBACNU,MAAO,kBACPkH,MAAO,YCuFIC,EAzGO,CACpB,CACEnH,MAAO,cACPC,MAAO,OACPS,SAAU,CACR,CACEV,MAAO,gBACPC,MAAO,wBAET,CACED,MAAO,gBACPC,MAAO,wBAET,CACED,MAAO,gBACPC,MAAO,wBAET,CACED,MAAO,gBACPC,MAAO,wBAET,CACED,MAAO,gBACPC,MAAO,wBAET,CACED,MAAO,gBACPC,MAAO,wBAET,CACED,MAAO,gBACPC,MAAO,0BAIb,CACED,MAAO,gBACPC,MAAO,eACPS,SAAU,CACR,CACEV,MAAO,kBACPC,MAAO,wBAET,CACED,MAAO,kBACPC,MAAO,wBAET,CACED,MAAO,kBACPC,MAAO,wBAET,CACED,MAAO,kBACPC,MAAO,wBAET,CACED,MAAO,kBACPC,MAAO,wBAET,CACED,MAAO,kBACPC,MAAO,wBAET,CACED,MAAO,kBACPC,MAAO,0BAIb,CACED,MAAO,gBACPC,MAAO,qBACPS,SAAU,CACR,CACEV,MAAO,kBACPC,MAAO,yBAET,CACED,MAAO,kBACPC,MAAO,yBAET,CACED,MAAO,kBACPC,MAAO,yBAET,CACED,MAAO,kBACPC,MAAO,yBAET,CACED,MAAO,kBACPC,MAAO,yBAET,CACED,MAAO,kBACPC,MAAO,yBAET,CACED,MAAO,kBACPC,MAAO,4BC5FTmH,EAAa,SAACC,GAClB,IAAMC,EAAUD,EAAIE,MAAM,KACtBC,EAAM,GAMV,OALAF,EAAQjF,SAAQ,SAAC6D,EAAMuB,GACjBzB,EAAWE,KACbsB,IAAkB,IAAVC,EAAc,SAAM,IAAMzB,EAAWE,GAAM5G,SAGhDkI,GAGFE,EAAc,SAAC,GAAwB,IAAtBlC,EA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","file":"static/js/main.954af092.chunk.js","sourcesContent":["import ReactGA from 'react-ga'\n\nexport const initGA = () => {\n  ReactGA.initialize(\n    [\n      {\n        trackingId: process.env.REACT_APP_GA3,\n        gaOptions: {\n          name: 'ga3',\n        }\n      },\n      {\n        trackingId: process.env.REACT_APP_GA4,\n        gaOptions: {\n          name: 'ga4'\n        }\n      }\n    ],\n    { debug: false, alwaysSendToDefaultTracker: false }\n  )\n\tconsole.log('GA init')\n}\n\nexport const logPageView = () => {\n  const pathname = window.location.pathname\n  console.log('logPageView', pathname)\n  ReactGA.set({ page: pathname })\n  ReactGA.pageview(pathname)\n}\n\n// category: 'User', 'Navigation', 'App Editing'\n// action: 'Clicked Delete', 'Added a component', 'Deleted account'\n// label:  'Added a component' action, we could add the name of a component as the label. E.g. 'Survey', 'Heading', 'Button', etc.\nexport const gaEvent = (category, action, param) => {\n\tconsole.log('gaEvent:', category, action)\n\tif (!category || !action) {\n\t\treturn console.warn('category and action is required')\n\t}\n\tif (param) {\n    const { value, label } = param\n\t\tReactGA.event({ category, action, value, label })\n\t} else {\n\t\tReactGA.event({ category, action })\n\t}\n}\n\nexport const gaException = ({ description, isFatal }) => {\n  ReactGA.exception({\n    description,\n    fatal: Boolean(isFatal)\n  })\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { gaEvent } from '../../services/GA'\n\nconst Banner = () => {\n  return (\n    <div className=\"home-banner\" onClick={() => gaEvent('home', 'Click banner image')}>\n      <div className=\"info\">\n        <h3>沙丘 Dune</h3>\n        <p>講述一個神祕又性格強烈的英雄之心路歷程，本片講述保羅亞崔迪的故事，他是一個聰明又富有天賦的年輕人，肩負超越自己理解的偉大天命，且必須遠行至宇宙中最危險的行星，以確保他家人及族人未來的延續。敵對勢力為搶奪唯有此行星才出產的珍貴資源大打出手，而這也是人類最珍視的資源，一種能解鎖人類偉大潛能的物質，唯有能戰勝自己恐懼的人才能存活。</p>\n        <div className=\"buttons\">\n          {/* <Link to=\"/\">\n            <Icon icon=\"info\" />\n            查看內容\n          </Link> */}\n          <Link to=\"/browse\" onClick={() => gaEvent('home', 'Click to browse movies', { label: 'text-button' })}>\n            更多好片\n          </Link>\n        </div>\n      </div>\n      <div className=\"home-banner-bottom\" />\n    </div>\n  )\n}\n\nexport default React.memo(Banner)\n","import { isFunction } from 'lodash'\nimport React, { useRef, cloneElement } from 'react'\nimport { render, createPortal } from 'react-dom'\n\nconst Portal = ({ children }) => {\n\tconst container = document.body\n\treturn createPortal(children, container)\n}\n\nconst Modal = ({ children }) => {\n\tconst modalRef = useRef(null)\n\tconst closeModal = (duration = 300, handler) => {\n\t\tconst removeSelf = () => {\n\t\t\tif (modalRef.current) modalRef.current.remove()\n\t\t\tif (isFunction(handler)) handler()\n\t\t}\n\t\tsetTimeout(removeSelf, duration)\n\t}\n\n\tconst modalProps = { closeModal }\n\treturn (\n\t\t<Portal>\n\t\t\t<div ref={modalRef}>{cloneElement(children, { ...children.props, ...modalProps })}</div>\n\t\t</Portal>\n\t)\n}\n\nconst createModel = (children) => {\n\tconst element = <Modal>{children}</Modal>\n\tconst container = document.createElement('div')\n\trender(element, container)\n}\n\nexport default createModel\n","export default function removeCards(className) {\n  const modals = document.querySelectorAll(`${className ? className : '.modal'}`)\n  if (modals) modals.forEach(modal => {\n    modal.classList.add('hidden')\n    setTimeout(() => modal.remove(), 100)\n  })\n}","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { isEmpty } from 'lodash'\nimport { FloatingCard } from '../Movie'\nimport { removeCards, createModel } from '../../utils'\nimport { gaEvent } from '../../services/GA'\n\nconst  MovieCard = ({ data }) => {\n  const [visible, setVisible] = useState(false)\n  const cardRef = useRef(null)\n\n  const showFloatingCard = useCallback(() => {\n    removeCards()\n    setVisible(true)\n    const pathname = window.location.pathname.replace('/', '')\n    gaEvent(isEmpty(pathname) ? 'home' : pathname, 'Hover a movie card', { value: data.internal })\n  }, [])\n\n  useEffect(() => {\n    if (visible) {\n      const clintRect = cardRef.current.getBoundingClientRect()\n      createModel(\n        <FloatingCard\n          data={data}\n          clintRect={clintRect}\n          setVisible={setVisible}\n        />\n      )\n    }\n  }, [visible])\n\n  return (\n    <div\n      onMouseOut={() => setVisible(false)}\n      onMouseEnter={showFloatingCard}\n      className=\"movie-card\"\n      ref={cardRef}\n    >\n      <img src={data.img} onMouseEnter={showFloatingCard} alt=\"\"/>\n    </div>\n  )\n}\nexport default React.memo(MovieCard)","import axios from 'axios'\n\nconst API = axios.create({\n    baseURL: process.env.REACT_APP_API,\n    headers: {\n        'Content-Type': 'application/json',\n    },\n    withCredentials: false,\n    validateStatus: (status) => {\n        return status >= 200 && status <= 500\n    }\n})\n\nAPI.interceptors.request.use((config) => {\n    return config\n}, (err) => {\n    return Promise.reject(err)\n})\n\n// Add a response interceptor\nAPI.interceptors.response.use(function (response) {\n    if (response.status !== 200) {\n        const errorMessage = response.data.message || response.data.msg\n        console.error(`url:${response.request.responseURL} error`, `errorMessage:${errorMessage}`, `status code:${response.status}`)\n    }\n    return response\n}, function (error) {\n    console.error(error)\n    error.response && console.error(error.response.request.responseURL, error)\n    return Promise.reject(error)\n})\n\nexport const getMovies = (params) => API.get('/api/movie/', { params })\nexport const getMovieDetail = (id) => API.get(`api/detail/${id}`)\nexport const getRecommends = (id) => API.get(`api/movie/recommend?&id=${id}`)\nexport const getMoviesByKeyword = (keyword) => API.get(`api/search/?query=${keyword}`)","import React from 'react'\nimport { createModel, removeCards } from '../../utils'\nimport MovieDetail from './MovieDetail'\nimport { gaEvent } from '../../services/GA'\n\nconst  RecommendCard = ({ data }) => {\n  const { date_in_theater, main_taiwan_name, internal } = data\n\n  const onClickCard = () => {\n    removeCards()\n    setTimeout(() => {\n      createModel(<MovieDetail id={internal} />)\n    }, 500)\n    gaEvent('movieList', 'click to see movie detail', { value: internal })\n  }\n\n  return (\n    <div className=\"recommend-card overlay\" onClick={onClickCard}>\n      <div className=\"recommend-card-img\">\n        <img src={data.img} />\n      </div>\n      <div className=\"recommend-card-content\">\n        <h6>{date_in_theater.slice(0, 4)}</h6>\n        <p>{main_taiwan_name}</p>\n      </div>\n    </div>\n  )\n}\nexport default React.memo(RecommendCard)","const MOVIE_TYPE = {\n  Comedy: {\n    id: 1,\n    name: '喜劇',\n    type: 'comedy',\n  },\n  Fantasy: {\n    id: 2,\n    name: '奇幻',\n    type: 'fantasy',\n  },\n  Romance: {\n    id: 3,\n    name: '愛情',\n    type: 'romance',\n  },\n  Drama: {\n    id: 4,\n    name: '劇情',\n    type: 'drama',\n  },\n  Action: {\n    id: 5,\n    name: '動作',\n    type: 'action',\n  },\n  Suspense: {\n    id: 6,\n    name: '懸疑',\n    type: 'suspense',\n  },\n  War: {\n    id: 7,\n    name: '戰爭',\n    type: 'war',\n  },\n  Adventure: {\n    id: 8,\n    name: '冒險',\n    type: 'adventure',\n  },\n  Mystery: {\n    id: 11,\n    name: '推理',\n    type: 'mystery',\n  },\n  Horror: {\n    id: 12,\n    name: '驚悚恐怖',\n    type: 'horror',\n  },\n  'Sci-Fi': {\n    id: 13,\n    name: '科幻',\n    type: 'Science fiction',\n  },\n  Crime: {\n    id: 14,\n    name: '犯罪',\n    type: 'crime',\n  },\n  Historical: {\n    id: 16,\n    name: '歷史',\n    type: 'historical',\n  },\n  Musical:  {\n    id: 17,\n    name: '歌舞',\n    type: 'musical',\n  },\n  Sports:  {\n    id: 18,\n    name: '體育',\n    type: 'sports',\n  },\n  Biography: {\n    name: '傳記',\n    type: 'biography',\n  }\n}\n\nexport default MOVIE_TYPE","const RANKING_TYPE = [\n  {\n    name: '熱門參考',\n    value: 'rating_total_amount',\n  },\n  {\n    name: 'IMDb',\n    value: 'imdb_rating',\n    color: '#DBA506',\n  },\n  {\n    name: '豆瓣',\n    value: 'douban_rating',\n    color: '#2e963d',\n  },\n  {\n    name: ' 爛番茄',\n    value: 'audience_rating',\n    color: '#FA320A',\n  },\n]\n\nexport default RANKING_TYPE","const SCORE_OPTIONS = [\n  {\n    value: 'imdb_rating',\n    label: 'IMDb',\n    children: [\n      {\n        value: 'imdb_rating=9',\n        label: '9 分以上',\n      },\n      {\n        value: 'imdb_rating=8',\n        label: '8 分以上',\n      },\n      {\n        value: 'imdb_rating=7',\n        label: '7 分以上',\n      },\n      {\n        value: 'imdb_rating=6',\n        label: '6 分以上',\n      },\n      {\n        value: 'imdb_rating=5',\n        label: '5 分以上',\n      },\n      {\n        value: 'imdb_rating=4',\n        label: '4 分以上',\n      },\n      {\n        value: 'imdb_rating=3',\n        label: '3 分以上',\n      },\n    ]\n  },\n  {\n    value: 'douban_rating',\n    label: '豆瓣',\n    children: [\n      {\n        value: 'douban_rating=9',\n        label: '9 分以上',\n      },\n      {\n        value: 'douban_rating=8',\n        label: '8 分以上',\n      },\n      {\n        value: 'douban_rating=7',\n        label: '7 分以上',\n      },\n      {\n        value: 'douban_rating=6',\n        label: '6 分以上',\n      },\n      {\n        value: 'douban_rating=5',\n        label: '5 分以上',\n      },\n      {\n        value: 'douban_rating=4',\n        label: '4 分以上',\n      },\n      {\n        value: 'douban_rating=3',\n        label: '3 分以上',\n      },\n    ]\n  },\n  {\n    value: 'tomato_rating',\n    label: '爛番茄',\n    children: [\n      {\n        value: 'tomato_rating=9',\n        label: '90 分以上',\n      },\n      {\n        value: 'tomato_rating=8',\n        label: '80 分以上',\n      },\n      {\n        value: 'tomato_rating=7',\n        label: '70 分以上',\n      },\n      {\n        value: 'tomato_rating=6',\n        label: '60 分以上',\n      },\n      {\n        value: 'tomato_rating=5',\n        label: '50 分以上',\n      },\n      {\n        value: 'tomato_rating=4',\n        label: '40 分以上',\n      },\n      {\n        value: 'tomato_rating=3',\n        label: '30 分以上',\n      },\n    ]\n  },\n]\n\nexport default SCORE_OPTIONS","import { isEmpty } from 'lodash'\nimport React, { useState, useEffect, useCallback, useRef } from 'react'\nimport { getMovieDetail, getRecommends } from '../../api'\nimport RecommendCard from './RecommendCard'\nimport { MOVIE_TYPE } from '../../constants'\nimport { gaEvent } from '../../services/GA'\n\nconst handleType = (str) => {\n  const typeArr = str.split(',')\n  let ans = ''\n  typeArr.forEach((type, index) => {\n    if (MOVIE_TYPE[type]) {\n      ans += (index !== 0 ? '、' : '') + MOVIE_TYPE[type].name\n    }\n  })\n  return ans\n}\n\nconst  MovieDetail = ({ id, closeModal }) => {\n  const [firstTimeer, setFirstTimer] = useState(null)\n  const [secondTimer, setSecondTimer] = useState(null)\n  const [info, setInfo] = useState({})\n  const [recommend, setRecommend] = useState([])\n  const pageRef = useRef(null)\n\n  const handleClose = () => {\n    if (pageRef.current) {\n      pageRef.current.classList.add('disappear')\n      const id = setTimeout(() => closeModal(), 500)\n      setSecondTimer(id)\n    }\n    gaEvent('movieDetail', 'click to close movie detail', { value: id })\n\t}\n\n  const onRankingClick = (type) => {\n    const { rotten_tomato_id, imdb_id, douban_id } = info\n    gaEvent('movieDetail', 'click movie-ranking website', { value: id, label: type })\n    switch (type) {\n      case 'imdb':\n        return window.open(`https://www.imdb.com/title/${imdb_id}`, \"_blank\")\n      case 'douban':\n        return window.open(`https://movie.douban.com/subject/${douban_id}`, \"_blank\")\n      case 'tomatoes':\n        return window.open(`https://www.rottentomatoes.com/m/${rotten_tomato_id}`, \"_blank\")\n      default:\n        break;\n    }\n  }\n\n  const onLikeClick = () => {\n    gaEvent('movieDetail', 'click to like movie', { value: id })\n  }\n\n  const onCollectClick = () => {\n    gaEvent('movieDetail', 'click to collect movie', { value: id })\n  }\n\n  const fetchMovieInfo = useCallback(async() => {\n    const response = await getMovieDetail(id)\n    if (response.status !== 200) return closeModal()\n    setInfo(response.data[0])\n    const timerId = setTimeout(() => {\n      pageRef.current.classList.remove('disappear')\n    }, 500)\n    setFirstTimer(timerId)\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }, [])\n\n  const fetchRecommended = async() => {\n    const response = await getRecommends(id)\n    if (response.status !== 200) return\n    setRecommend(response.data)\n  }\n\n  useEffect(() => {\n    fetchMovieInfo()\n    fetchRecommended()\n\n    return () => {\n      clearTimeout(firstTimeer)\n      clearTimeout(secondTimer)\n    }\n  }, [])\n\n  return (\n    <div className=\"modal movie-detail-container\">\n      <div onClick={handleClose} className=\"black-background\" />\n      {!isEmpty(info) && <div className=\"movie-detail disappear\" ref={pageRef} >\n        <div className=\"movie-detail-top\">\n          <button className=\"btn-close\" onClick={handleClose}>\n            <svg viewBox=\"0 0 24 24\" data-uia=\"previewModal-closebtn\" role=\"button\" aria-label=\"close\" tabIndex=\"0\"><path d=\"M12 10.586l7.293-7.293 1.414 1.414L13.414 12l7.293 7.293-1.414 1.414L12 13.414l-7.293 7.293-1.414-1.414L10.586 12 3.293 4.707l1.414-1.414L12 10.586z\" fill=\"currentColor\"></path></svg>\n          </button>\n          {!isEmpty(info.video_id) ? <iframe\n            src={`https://www.youtube.com/embed/${info.video_id}?rel=0&autoplay=1&mute=1&enablejsapi=1`}\n            title=\"YouTube video player\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          /> :  <img src={info.img}/>}\n          <div className=\"background-gradient\" />\n          <div className=\"info\">\n            <h3>{info.main_taiwan_name}</h3>\n            <div className=\"buttons\">\n              <div className=\"button plus\" onClick={onLikeClick}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M32 16v32m16-16H16\"></path></svg>\n              </div>\n              <div className=\"button play\" onClick={onCollectClick}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M54 35h2a4 4 0 1 0 0-8H34a81 81 0 0 0 2-18 4 4 0 0 0-8 0s-4 22-18 22H4v24h10c4 0 12 4 16 4h20a4 4 0 0 0 0-8h2a4 4 0 0 0 0-8h2a4 4 0 0 0 0-8\"></path></svg>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"movie-detail-bottom\">\n          <div className=\"left-row\">\n            <p className=\"preference\">XX% 適合妳</p>\n            <p className=\"year\">{info.date_in_theater ? info.date_in_theater.slice(0, 4) : ''}</p>\n            {info.chinese_description ? info.chinese_description.trim().split('。').map((desc, index) => {\n              if (!desc.length) return null\n              return <article key={index}>{`${desc}。`}</article>\n            }) :  <article />}\n          </div>\n          <div className=\"right-row\">\n            <p><span>導演：</span>{info.director_list || ''}</p>\n            <p><span>演員：</span>{info.actor_list.replaceAll(',', '、')}</p>\n            <p><span>類型：</span>{handleType(info.feature_list)}</p>\n            <div className=\"buttons\">\n              {info.rating && <div className=\"icon-button-wrap\" onClick={() => onRankingClick('imdb')}>\n                <div className=\"button imdb\"/>\n                <p className=\"score\">{`${info.rating}（共 ${info.rating_count} 評分）`}</p>\n              </div>}\n              {info.avg_rating && <div className=\"icon-button-wrap\" onClick={() => onRankingClick('douban')}>\n                <div className=\"button douban\"/>\n                <p className=\"score\">{`${info.avg_rating}（共 ${info.total_rating_amount} 評分）`}</p>\n              </div>}\n              {!isEmpty(info.audience_rating) && <div className=\"icon-button-wrap\" onClick={() => onRankingClick('tomatoes')}>\n                <div className=\"button tomatoes\"/>\n                <p className=\"score\">{`${info.audience_rating} 觀眾評分（共 ${info.audience_rating_amount} 評分）`}</p>\n              </div>}\n              {!isEmpty(info.tomator_rating) && <div className=\"icon-button-wrap\" onClick={() => onRankingClick('tomatoes')}>\n                <div className=\"button tomatoes\"/>\n                <p className=\"score\">{`${info.tomator_rating} 影評評分（共 ${info.tomator_rating_amount} 評分）`}</p>\n              </div>}\n            </div>\n          </div>\n        </div>\n        {recommend && <div className=\"movie-detail-recommend\">\n          <h4>類似影片</h4>\n          <div className=\"list\">\n            {recommend.map((data, index) => {\n              if (index > 8) return null\n              return <RecommendCard key={data.id} data={data}/>\n            }, )}\n          </div>\n        </div>}\n      </div>}\n    </div>\n  )\n}\nexport default React.memo(MovieDetail)","import React, { useState, useRef, useEffect, useCallback } from 'react'\nimport { isEmpty } from 'lodash'\nimport MovieDetail from './MovieDetail'\nimport { createModel } from '../../utils'\nimport { gaEvent } from '../../services/GA'\n\nconst handleStyle = ({ width, height, top, left }) => {\n  const { availWidth, availHeight } = window.screen\n  // 卡片寬高\n  const newWidth = width*1.7 > 350 ? 350 : width*1.7\n  const newHeight = newWidth*1.08\n  // 卡片距離\n  let newTop = top - ((newHeight - height) / 2)\n  let newLeft = left - ((newWidth - width) / 2)\n  if (newTop < 60) newTop = 60\n  if ((newHeight + newTop) > availHeight) newTop = availHeight - newHeight\n  if(left + newWidth > availWidth) newLeft =  availWidth*0.96 - newWidth\n  if (left - 10 <= availWidth*0.04) newLeft = availWidth*0.04\n  return {\n    position: { top: newTop, left: newLeft },\n    size: { width: newWidth, height: 'auto' }\n  }\n}\n\nconst RankingIcon = React.memo(({ type, id, rating }) => {\n  const onRatingClick = useCallback(() => {\n    const pathname = window.location.pathname.replace('/', '')\n    gaEvent(isEmpty(pathname) ? 'home' : pathname, 'Click movie-ranking type', { value: id, label: type })\n  }, [])\n\n  return (\n    <div className=\"icon-button-wrap\" onClick={onRatingClick}>\n      <div className={`button ${type}`} />\n      <p className=\"score\">{rating}</p>\n    </div>\n  )\n})\n\nconst FloatingCard = ({ data, clintRect, closeModal, setVisible }) => {\n  const [firstTimeer, setFirstTimer] = useState(null)\n  const [secondTimer, setSecondTimer] = useState(null)\n  const cardRef = useRef(null)\n  const { position, size } = handleStyle(clintRect)\n\n  const onMouseLeave = () => {\n    if (cardRef) {\n      cardRef.current.classList.add('disappear')\n      const id = setTimeout(() => closeModal(), 500)\n      setSecondTimer(id)\n    }\n    setVisible(false)\n  }\n\n  const onInfoClick = () => {\n    const id = data.internal\n    const pathname = window.location.pathname.replace('/', '')\n    gaEvent(isEmpty(pathname) ? 'home' : pathname, 'Click to see movie detail', { value: id })\n    createModel(<MovieDetail id={id} />)\n  }\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      cardRef.current.classList.remove('disappear')\n    }, 300)\n    setFirstTimer(id)\n\n    return () => {\n      clearTimeout(firstTimeer)\n      clearTimeout(secondTimer)\n    }\n  }, [])\n  \n\n  const { id, internal, main_taiwan_name, main_original_name, imdb_rating, douban_rating, tomator_rating, img, video_id } = data\n  return (\n    <div className=\"modal floating-card-wrapper\" style={position}>\n      <div className=\"floating-card disappear\" onMouseLeave={onMouseLeave} style={size} ref={cardRef}>\n        <div className=\"movie-card-info\">\n          {!isEmpty(video_id) ? <iframe\n            src={`https://www.youtube.com/embed/${video_id}?rel=0&autoplay=1&mute=1&enablejsapi=1`}\n            title=\"YouTube video player\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          ></iframe> : <img src={img}/>}\n          <div className=\"info-content\">\n            <div className=\"content-top\">\n              <h4>{`${main_taiwan_name}  `}<span>{main_original_name}</span></h4>\n              {/* <p className=\"preference\">{`XX% 適合您`}</p> */}\n            </div>\n            <div className=\"tags\">\n              {/* <p>哈哈哈</p>\n              <p>嘻嘻</p>\n              <p>嘎嘎嘎</p> */}\n            </div>\n            <div className=\"buttons\">\n              {!isEmpty(imdb_rating) && <RankingIcon type={'imdb'} id={internal} rating={imdb_rating} />}\n              {!isEmpty(douban_rating) && <RankingIcon type={'douban'} id={internal} rating={douban_rating} />}\n              {!isEmpty(tomator_rating) && <RankingIcon type={'tomatoes'} id={internal} rating={tomator_rating} />}\n              <div className=\"button play\" onClick={() => onInfoClick(id)}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M6 2l52 30L6 62V2z\"></path></svg>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div> \n  )\n}\n\n\nexport default React.memo(FloatingCard)\n","import React, { useRef } from 'react'\nimport Slider from 'react-slick'\nimport { isEmpty } from 'lodash'\nimport { MovieCard } from '../Movie'\nimport { Link } from 'react-router-dom'\nimport { removeCards } from '../../utils'\nimport { gaEvent } from '../../services/GA'\n\nconst responsive = [\n  {\n    breakpoint: 1400,\n    settings: {\n      slidesToShow: 8,\n      slidesToScroll: 8,\n      infinite: true,\n    },\n  },\n  {\n    breakpoint: 1200,\n    settings: {\n      slidesToShow: 6,\n      slidesToScroll: 6,\n      infinite: true,\n    },\n  },\n  {\n    breakpoint: 992,\n    settings: {\n      slidesToShow: 6,\n      slidesToScroll: 6,\n      infinite: true,\n    },\n  },\n  {\n    breakpoint: 768,\n    settings: {\n      slidesToShow: 4,\n      slidesToScroll: 4,\n      infinite: true,\n    },\n  },\n  {\n    breakpoint: 576,\n    settings: {\n      slidesToShow: 4,\n      slidesToScroll: 4,\n    },\n  },\n]\n\nconst MovieList = React.memo(({ title, movies = [] }) => {\n  const sliderRef = useRef(null) \n  const settings = {\n    dots: false,\n    infinite: true,\n    speed: 500,\n    slidesToShow: 7,\n    slidesToScroll: 7,\n    initialSlide: 0,\n    responsive,\n    onSwipe: () => gaEvent('movieList', 'swipe a movie list'),\n  }\n\n  const onSliderClick = (type) => {\n    removeCards()\n    gaEvent('movieList', `slide to ${type} list`, { value: title })\n    type === 'previous' ? sliderRef.current?.slickPrev() : sliderRef.current?.slickNext()\n  }\n\n  return (\n    <div className=\"movie-list-wrapper\">\n      {isEmpty(movies) ? <div /> : (<><Link className=\"movie-list-title\" to=\"/\">{title}</Link>\n      <div className=\"movie-list\">\n        <div className=\"slider-container\">\n          <button className=\"btn-previous\" onClick={() => onSliderClick('previous')} />\n          <Slider {...settings} ref={sliderRef}>\n            {movies.map((data) => {\n              return (\n                <MovieCard key={data.main_taiwan_name} data={data} />\n            )})}\n          </Slider>\n          <button className=\"btn-next\" onClick={() => onSliderClick('next')} />\n        </div>\n      </div></>)}\n    </div>\n  )\n})\n\nexport default MovieList","import { isArray } from 'lodash'\nimport { useState, useEffect } from 'react'\nimport { getMovies } from '../api'\n\nexport default function useFetchMovies(condition = {}) {\n  const [loading, setLoading] = useState(false)\n  const [movies, setMovies] = useState([])\n  if(!condition.hasOwnProperty('start')) condition.start = 0\n  if(!condition.hasOwnProperty('sort')) condition.sort = 'rating_total_amount'\n\n  const fetchMovies = async () => {\n    setLoading(true)\n    const response = await getMovies(condition)\n    if (response.status !== 200) return console.log(response)\n    const { data } = response\n    if (!isArray(data)) return\n    setMovies(data)\n    setLoading(false)\n  }\n  useEffect(() => {\n    fetchMovies()\n  }, [])\n\n  return [ movies, loading ]\n}","import React, { useEffect } from 'react'\nimport { removeCards } from '../../utils'\nimport { initGA, logPageView } from '../../services/GA'\n\nconst Layout = ({ children, style, className }) => {\n  useEffect(() => {\n    if (!window.GA_INITIALIZED) {\n      initGA()\n      window.GA_INITIALIZED = true\n    }\n    logPageView()\n    removeCards()\n  }, [])\n\n  return (\n    <div style={style} className={`layout ${className}`}>{children}</div>\n  )\n}\n\nexport default React.memo(Layout)","import React from 'react';\nimport { Banner, MovieList } from '../../components/Home';\nimport useFetchMovies from '../../hooks/useFetchMovies'\nimport { MOVIE_TYPE } from '../../constants'\nimport Layout from '../../components/App/Layout'\n\nconst Home = () => {\n  const [classicMovies, loading] = useFetchMovies()\n  const [romance] = useFetchMovies({ feature: MOVIE_TYPE['Romance'].id })\n  const [mystery] = useFetchMovies({ feature: MOVIE_TYPE['Mystery'].id })\n  const [triller] = useFetchMovies({ feature: MOVIE_TYPE['Horror'].id })\n  const [comedy] = useFetchMovies({ feature: MOVIE_TYPE['Comedy'].id })\n  const [ScienceFiction] = useFetchMovies({ feature: MOVIE_TYPE['Sci-Fi'].id })\n\n  return (\n    <Layout className={`${loading && 'loading'}`}>\n      <Banner/>\n      <div className=\"home-content-wrapper\">\n        <MovieList movies={classicMovies} title=\"熱門經典好片\" />\n        <MovieList movies={romance} title=\"浪漫愛情\" />\n        <MovieList movies={mystery} title=\"推理懸疑\" />\n        <MovieList movies={triller} title=\"驚悚恐怖\" />\n        <MovieList movies={comedy} title=\"輕鬆喜劇\" />\n        <MovieList movies={ScienceFiction} title=\"科幻世界\" />\n      </div>\n    </Layout>\n  );\n};\n\nexport default Home;\n","import { initializeApp } from \"firebase/app\"\nimport { getAuth, signInWithPopup, signOut, GoogleAuthProvider } from \"firebase/auth\"\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId:  process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID\n}\ninitializeApp(firebaseConfig)\n\nexport const auth = getAuth()\n\n// google signIn\nconst provider = new GoogleAuthProvider()\nprovider.setCustomParameters({ prompt: \"select_account\" })\nexport const signInWithGoogle = () => {\n  return signInWithPopup(auth, provider)\n}\n\nexport const logout = async () => {\n  await signOut(auth)\n}\n","import React, { useState, useEffect,  createContext } from \"react\";\nimport { auth } from \"../services/firebase\"\n\nexport const UserContext = createContext({ user: null })\n\nconst UserProvider = ({ children }) => {\n  const [user, setUser] = useState(null)\n  useEffect(() => {\n    auth.onAuthStateChanged((result) => {\n      if (!result) return setUser(null)\n      const { displayName, email, accessToken, photoURL } = result\n      setUser({\n        name: displayName,\n        email: email,\n        picture: photoURL,\n        accessToken: accessToken,\n        isLogin: true,\n      })\n    })\n  },[])\n  return (\n    <UserContext.Provider value={user}>{children}</UserContext.Provider>\n  )\n}\n\nexport default UserProvider","import React, { useState, useContext } from 'react'\nimport { Redirect } from \"react-router\";\nimport { Toggle } from 'rsuite'\nimport Layout from '../../components/App/Layout'\nimport { signInWithGoogle } from \"../../services/firebase\";\nimport { UserContext } from '../../providers/UserProvider';\nimport { gaEvent } from '../../services/GA'\n\nconst LoginPage = () => {\n  const user = useContext(UserContext)\n  const [isRegister, setRegister] = useState(false)\n\n  const onToggleChange = (type) => {\n    setRegister(type === 'register')\n    gaEvent('signIn', 'toggle button', { label: type })\n  }\n  return (\n    <>\n    {user ? <Redirect to='/' /> : (<Layout className=\"login-page-wrapper\">\n      <div className=\"centered-wrap\">\n        <div className={`card ${isRegister && 'card-flip'}`}>\n          <section className=\"login card-front\">\n            <h3 className=\"login-title\">Sign In</h3>\n            <div className=\"login-group\">\n              <input className=\"login-group-input\" type=\"text\" autoComplete=\"off\" onClick={() => gaEvent('signIn', 'Click sign-in username')}/>\n              <label className=\"login-group-label\">帳號 Username</label>\n            </div>\n            <div className=\"login-group\">\n              <input className=\"login-group-input\" type=\"password\" autoComplete=\"off\" onClick={() => gaEvent('signIn', 'Click sign-in password')}/>\n              <label className=\"login-group-label\">密碼 Password</label>\n            </div>\n            <button className=\"login-btn\" type=\"button\" onClick={() => gaEvent('signIn', 'click sign-in button')}>登入</button>\n            <div className=\"login-cta\">\n              <button style={{ visibility: 'hidden' }}>忘記密碼？</button>\n              <button onClick={() => {\n                gaEvent('signIn', 'click sign-in button', { label: 'google' })\n                signInWithGoogle()\n              }}>使用 Google 登入</button>\n            </div>\n            <Toggle size=\"lg\" checkedChildren=\"登入\" unCheckedChildren=\"註冊\" checked={isRegister} onChange={() => onToggleChange('register')} style={{ width: '70px'}}/>\n          </section>\n          <section className=\"register card-back\">\n            <h3 className=\"register-title\">Sign Up</h3>\n            <div className=\"register-group\">\n              <input className=\"register-group-input\" type=\"email\" autoComplete=\"off\" onClick={() => gaEvent('signIn', 'click sign-up email')}/>\n              <label className=\"register-group-label\">註冊信箱 Email</label>\n            </div>\n            <div className=\"register-group\">\n              <input className=\"register-group-input\" type=\"text\" autoComplete=\"off\" onClick={() => gaEvent('signIn', 'click sign-up username')}/>\n              <label className=\"register-group-label\">帳號 Username</label>\n            </div>\n            <div className=\"register-group\">\n              <input className=\"register-group-input\" type=\"password\" autoComplete=\"off\" onClick={() => gaEvent('signIn', 'click sign-up password')}/>\n              <label className=\"register-group-label\">密碼 Password</label>\n            </div>\n            <button className=\"register-btn\" type=\"button\" onClick={() => gaEvent('signIn', 'click sign-up button')}>註冊</button>\n            <Toggle size=\"lg\" checkedChildren=\"登入\" unCheckedChildren=\"註冊\" checked={isRegister} onChange={() => onToggleChange('login')} style={{ width: '70px'}}/>\n          </section>\n        </div>\n      </div>\n    </Layout>)\n    }\n  </>)\n}\n\nexport default LoginPage","import React, { useState, useEffect, useContext } from 'react'\nimport { Redirect } from \"react-router\";\nimport Layout from '../../components/App/Layout'\nimport { UserContext } from '../../providers/UserProvider';\n\nconst ProfilePage = () => {\n  const user = useContext(UserContext)\n\n  return (\n    <>\n    {!user ? <Redirect to='/login' /> : (<Layout className=\"profile-page-wrapper\">\n\n    </Layout>)\n    }\n  </>)\n}\n\nexport default ProfilePage","import { useHistory } from \"react-router-dom\";\nimport { removeCards } from '../utils'\n\nexport default function useRouter() {\n  const history = useHistory()\n\n  const changeRouter = (path) => {\n    if (path) {\n      removeCards() // 換頁時移除卡片\n      history.push(path)\n    }\n  }\n\n  return { changeRouter }\n}","import React, { useState, useEffect } from 'react'\nimport { isEmpty, isArray } from 'lodash'\nimport { MovieCard } from '../../components/Movie'\nimport { getMoviesByKeyword } from '../../api'\nimport useRouter from '../../hooks/useRouter'\nimport Layout from '../../components/App/Layout'\n\nconst Search = ({ searchWord }) => {\n  const [movies, setMovies] = useState([])\n  const changeRouter = useRouter()\n\n  useEffect(() => {\n    if (isEmpty(searchWord)) return changeRouter('/')\n\n    // fetch\n    const fetchMovies = async (keyword) => {\n      const response = await getMoviesByKeyword(keyword)\n      if (response.status !== 200) return console.log(response)\n      const { data } = response\n      if (!isArray(data)) return\n      setMovies(data)\n    }\n    fetchMovies(searchWord)\n\n  }, [searchWord])\n\n  return (\n    <Layout className=\"search-wrapper\">\n      {!isEmpty(searchWord) && (\n        <>\n        {movies.length && <p className=\"search-hint\">找到與「 <span>{searchWord}</span> 」有關的影片</p>}\n        {!movies.length && <p className=\"search-hint\">找不到與「 <span>{searchWord}</span> 」有關的影片</p>}\n        <div className=\"movie-gallery\">\n          {movies.map((data) => {\n            return (\n              <MovieCard key={data.main_taiwan_name} data={data} />\n          )})}\n        </div>\n        </>\n      )}\n    </Layout>\n  );\n};\n\nexport default Search;\n","import React, { useState, useEffect, useRef } from 'react'\nimport { isEmpty, find, debounce } from 'lodash'\nimport dayjs from 'dayjs'\nimport { Dropdown, RangeSlider, Col, Cascader, RadioGroup, Radio } from 'rsuite'\nimport Layout from '../../components/App/Layout'\nimport { MovieCard } from '../../components/Movie'\nimport { MOVIE_TYPE, RANKING_TYPE, SCORE_OPTIONS } from '../../constants'\nimport { getMovies } from '../../api'\nimport { removeCards } from '../../utils'\nimport { gaEvent } from '../../services/GA'\n\n// 設定初始年份\nconst startYear = 1980\nconst endYear = Number(dayjs().format('YYYY'))\n\n// 整理電影類型\nconst movieTypes = Object.values(MOVIE_TYPE)\nmovieTypes.unshift({\n  id: '',\n  name: '全部類型',\n  type: 'all',\n},)\n\nconst Browse = () => {\n  const [isBottom, setBottom] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [movies, setMovies] = useState([])\n  const bottomRef = useRef(null)\n  const [conditions, setConditions] = useState({\n    sort: 'rating_total_amount',\n    feature: '',\n    start_year: startYear,\n    end_year: endYear,\n  })\n\n  const handleConditionChange = (type, value) => {\n    gaEvent('browse', `select movie by ${type}`, { label: value })\n    setConditions({...conditions, [type]: value})\n  }\n\n  const debouncedOnYearChange = debounce(([start_year, end_year]) => {\n    gaEvent('browse', 'select movie by year', { label: `${start_year}-${end_year}` })\n    setConditions({...conditions, start_year, end_year })\n  }, 500)\n\n  const onTypeSelect = (value) => {\n    const featureId = find(movieTypes, {type: value}).id\n    handleConditionChange('feature', featureId)\n  }\n\n  const onRankingTypeChange = (value) => {\n    handleConditionChange('sort', value)\n  }\n\n  const fetchMovies = async (start) => {\n    setLoading(true)\n    const params = {...conditions}\n    params.start = start ? start : 0\n    console.log(params)\n    const response = await getMovies(params)\n    if (response.status !== 200) return console.log(response)\n    const { data } = response\n    setMovies(start ? movies.concat(data) : data)\n    setLoading(false)\n  }\n\n  const renderScoreValues = () => {\n    let value = ''\n    const { imdb_rating, douban_rating, tomato_rating } = conditions\n    if (imdb_rating) value += `IMDB / ${imdb_rating} 分以上`\n    if (douban_rating) value += `${isEmpty(value) ? '' : '、'}豆瓣 / ${douban_rating} 分以上`\n    if (tomato_rating) value += `${isEmpty(value) ? '' : '、'}爛番茄 / ${tomato_rating}0 分以上`\n    return value\n  }\n\n  useEffect(() => {\n    removeCards()\n    fetchMovies()\n  }, [conditions])\n\n  useEffect(() => {\n    if (isBottom && movies.length) {\n      gaEvent('browse', 'scroll to bottom')\n      fetchMovies(movies.length)\n    }\n  }, [isBottom])\n\n  useEffect(() => {\n    const options = { threshold: [1] }\n    const intersectionObserver = new IntersectionObserver((entries) => {\n      const element = entries[0]\n      setBottom(element.isIntersecting)\n    }, options)\n    if (bottomRef.current) intersectionObserver.observe(bottomRef.current)\n\n    // cleanup\n    return () => {\n      intersectionObserver.disconnect()\n    }\n  }, [])\n\n\n  return (\n    <Layout className={`browse-wrapper ${loading && 'loading'}`}>\n      <div className=\"conditions-wrapper\">\n        <Col md={2}>\n          <div style={{ height: 400, position: 'fixed' }}>\n            <RangeSlider\n              defaultValue={[startYear, endYear]}\n              min={1980}\n              max={2021}\n              graduated\n              vertical\n              renderMark={mark => {\n                if (mark % 5 === 0) return <span>{mark}</span>\n              }}\n              onChange={debouncedOnYearChange}\n            />\n          </div>\n        </Col>\n        <div className=\"flex-space-between\">\n          <div>\n            <Dropdown\n              title={find(movieTypes, {id: conditions.feature}).name}\n              activeKey={conditions.feature}\n              onClick={() => gaEvent('browse', 'click to select movie type')}\n              onSelect={onTypeSelect}>\n              {movieTypes.map(({ name, type }, index) => {\n                return (<Dropdown.Item key={type} eventKey={type} children={name} />)\n              })}\n            </Dropdown>\n            <RadioGroup\n              inline\n              name=\"radioList\"\n              value={conditions.value}\n              appearance=\"picker\"\n              onChange={onRankingTypeChange}\n            >\n              {RANKING_TYPE.map(({ name, value, color }) => {\n                return <Radio style={{ backgroundColor: `${(conditions.sort === value) ? color : ''}` }} key={value} value={value}>{name}</Radio>\n              })}\n            </RadioGroup>\n          </div>\n          <Cascader\n            data={SCORE_OPTIONS}\n            appearance=\"default\"\n            placeholder=\"篩選評分\"\n            style={{ width: 'min-content', backgroundColor: '#141414'}}\n            searchable={false}\n            onChange={(value) => {\n              if (isEmpty(value)) {\n                delete conditions.imdb_rating\n                delete conditions.douban_rating\n                delete conditions.tomato_rating\n              }\n              fetchMovies()\n            }}\n            onSelect={(item, selectedPaths) => {\n              if (selectedPaths.length < 2) return\n              const [parent, child] = selectedPaths\n              handleConditionChange(parent.value , child.value[child.value.length - 1])  \n            }}\n            onClick={() => gaEvent('browse', 'click to limit movie-ranking score')}\n            renderValue={renderScoreValues}\n          />\n        </div>\n      </div>\n      <div className=\"movie-gallery\">\n        {movies.map((data) => {\n          return (\n            <MovieCard key={data.main_taiwan_name} data={data} />\n        )})}\n      </div>\n      <div className=\"page-bottom\" ref={bottomRef} />\n    </Layout>\n  );\n};\n\nexport default Browse;\n","import React, { useState, useContext } from 'react'\nimport { FaUserCircle } from 'react-icons/fa';\nimport { isEmpty } from 'lodash'\nimport Search from '@rsuite/icons/Search'\nimport { Link } from 'react-router-dom'\nimport { useLocation } from \"react-router\";\nimport useRouter from '../../hooks/useRouter'\nimport { gaEvent } from '../../services/GA'\nimport { UserContext } from '../../providers/UserProvider';\n\nconst Navbar = ({ isTop, setSearchWord }) => {\n  const location = useLocation();\n  const user = useContext(UserContext)\n  const { changeRouter } = useRouter()\n  const [isFocus, setInputFocus] = useState(false)\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      if (isEmpty(e.target.value)) {\n        setInputFocus(false)\n        changeRouter('/')\n      } else {\n        gaEvent('navbar', 'enter to search movie', { value: e.target.value })\n        setSearchWord(e.target.value)\n        changeRouter('/search')\n      }\n    }\n  }\n\n  return (\n    <nav className={`navbar ${isTop && 'top'}`}>\n      <div>\n        <Link className=\"logo\" to=\"/\" />\n        <ul className=\"navbar-list\" >\n          <Link to=\"/\" className={`${location.pathname === '/' && 'active'}`}>首頁</Link>\n          <Link to=\"/browse\" className={`${location.pathname === '/browse' && 'active'}`}>電影分類</Link>\n          {/* <Link to=\"/watch_list\">我的片單</Link> */}\n        </ul>\n      </div>\n      <div>\n        <div className={`navbar-input-group ${isFocus && 'isFocus'}`}>\n          <button>\n            <Search size=\"3em\" style={{ color: 'white', fontSize: '22px' }} onClick={() => {\n              gaEvent('navbar', 'click to search movie', { label: 'search-icon' })\n              setInputFocus(true)\n            }} />\n          </button>\n          <input type=\"text\" onKeyDown={handleKeyDown} autoComplete=\"off\"/>\n        </div>\n        <Link className=\"navbar-icon\" to={`${user ? '/profile' : 'login'}`} onClick={() => gaEvent('navbar', 'click to see user page', { label: 'user-icon' })}>\n          <FaUserCircle />\n        </Link>\n      </div>\n    </nav>\n  )\n}\n\nexport default React.memo(Navbar)","import React, { useState, useEffect } from 'react'\nimport { intersection, isEmpty } from 'lodash'\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport Home from '../../pages/Home'\nimport LoginPage from '../../pages/Login'\nimport ProfilePage from '../../pages/Profile'\nimport SearchPage from '../../pages/Search'\nimport BrowsePage from '../../pages/\bBrowse'\nimport Navbar from './Navbar'\nimport { removeCards } from '../../utils'\nimport UserProvider from \"../../providers/UserProvider\";\nimport { initGA } from '../../services/GA'\n\nconst App = () => {\n  const [isTop, setTop] = useState(true)\n  const [searchWord, setSearchWord] = useState('')\n\n  // scroll 移除卡片\n  window.addEventListener('scroll', () => {\n    setTop(window.scrollY < 150)\n    if (document.documentElement.scrollTop > 150) removeCards('.floating-card-wrapper')\n  })\n  // hover 移除卡片\n  window.addEventListener('mouseover', (e) => {\n    const elementArr = ['nav-bar', 'search-wrapper', 'home-content-wrapper', 'movie-list-wrapper', 'home-banner', 'movie-gallery', 'conditions-wrapper']\n    if (!isEmpty(intersection(e.target.classList, elementArr))) {\n      removeCards()\n    }\n  })\n\n  useEffect(() => {\n    initGA()\n  }, [])\n\n  return (\n    <UserProvider>\n      <BrowserRouter>\n        <Navbar isTop={isTop} setSearchWord={setSearchWord}/>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/search\" render={props => <SearchPage {...props} searchWord={searchWord} />} />\n          <Route exact path=\"/browse\" component={BrowsePage} />\n          <Route exact path=\"/login\" component={LoginPage} />\n          <Route exact path=\"/profile\" component={ProfilePage} />\n        </Switch>\n      </BrowserRouter>\n    </UserProvider>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport 'rsuite/dist/styles/rsuite-default.css';\nimport './style/scss/main.scss';\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n"],"sourceRoot":""}